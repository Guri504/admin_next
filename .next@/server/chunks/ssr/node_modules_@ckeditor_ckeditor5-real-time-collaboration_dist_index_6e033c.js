module.exports = {

"[project]/node_modules/@ckeditor/ckeditor5-real-time-collaboration/dist/index.js [app-ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
/*
 *             Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */ __turbopack_esm__({
    "CloudServicesCommentsAdapter": (()=>a),
    "CloudServicesRevisionHistoryAdapter": (()=>u),
    "CloudServicesTrackChangesAdapter": (()=>f),
    "PresenceList": (()=>s),
    "RealTimeCollaborationClient": (()=>l),
    "RealTimeCollaborativeComments": (()=>m),
    "RealTimeCollaborativeEditing": (()=>n),
    "RealTimeCollaborativeRevisionHistory": (()=>g),
    "RealTimeCollaborativeTrackChanges": (()=>p),
    "Sessions": (()=>i)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$core$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@ckeditor/ckeditor5-core/dist/index.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$utils$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@ckeditor/ckeditor5-utils/dist/index.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$ui$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@ckeditor/ckeditor5-ui/dist/index.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$engine$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@ckeditor/ckeditor5-engine/dist/index.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor$2d$cloud$2d$services$2d$collaboration$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@ckeditor/ckeditor-cloud-services-collaboration/dist/index.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$ckeditor5$2d$collaboration$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_import__("[project]/node_modules/ckeditor5-collaboration/dist/index.js [app-ssr] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$operations$2d$compressor$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@ckeditor/ckeditor5-operations-compressor/dist/index.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$collaboration$2d$core$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@ckeditor/ckeditor5-collaboration-core/dist/index.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lodash$2d$es$2f$isElement$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__default__as__isElement$3e$__ = __turbopack_import__("[project]/node_modules/lodash-es/isElement.js [app-ssr] (ecmascript) <export default as isElement>");
;
;
;
;
;
;
;
;
class c extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$core$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["ContextPlugin"] {
    static ['WebSocketGateway'] = (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor$2d$cloud$2d$services$2d$collaboration$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["WebSocketGateway"])();
    static ['initialReconnectionInterval'] = 0x3e8;
    ['connection'];
    ['_reconnectionStack'];
    ['_shouldPluginsReconnect'];
    ['_domEmitter'];
    static get ['requires']() {
        return [
            'CloudServices',
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$ui$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Notification"]
        ];
    }
    static get ['pluginName']() {
        return 'WebSocketGateway';
    }
    static get ['isOfficialPlugin']() {
        return !0x0;
    }
    static get ['isPremiumPlugin']() {
        return !0x0;
    }
    constructor(_0x14c802){
        super(_0x14c802), this['set']('state', __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor$2d$cloud$2d$services$2d$collaboration$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["WEB_SOCKET_GATEWAY_STATES"]['CONNECTED']), this['set']('_isBrowserOffline', !0x1), this['_reconnectionStack'] = new Set(), this['_shouldPluginsReconnect'] = !0x1, this['_domEmitter'] = Object['create'](__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$utils$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["DomEmitterMixin"]);
    }
    ['init']() {
        const _0x4e3356 = this['context'], _0x337f75 = _0x4e3356['plugins']['get']('CloudServices'), _0x1bea59 = _0x4e3356['plugins']['get'](__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$ui$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Notification"]);
        if (!_0x337f75['token']) throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$utils$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["CKEditorError"]('websocketgateway-missing-token', this);
        if (!_0x337f75['webSocketUrl']) throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$utils$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["CKEditorError"]('websocketgateway-missing-websocket-url', this);
        return this['_domEmitter']['listenTo'](window, 'offline', ()=>this['_isBrowserOffline'] = !0x0), this['_domEmitter']['listenTo'](window, 'online', ()=>this['_isBrowserOffline'] = !0x1), this['context']['config']['define']('cloudServices.connectionTimeout', 0xa), this['context']['config']['define']('cloudServices.requestTimeout', 0x14), c['WebSocketGateway']['connect'](_0x337f75['token'], _0x337f75['webSocketUrl'], {
            'timeout': 0x3e8 * this['context']['config']['get']('cloudServices.connectionTimeout'),
            'requestTimeout': 0x3e8 * this['context']['config']['get']('cloudServices.requestTimeout')
        })['then']((_0x4b6f84)=>{
            if (this['connection'] = _0x4b6f84, this['bind']('state')['to'](_0x4b6f84, 'state', this, '_isBrowserOffline', (_0x24508b, _0x12aa7d)=>('connected' !== _0x24508b && (this['_shouldPluginsReconnect'] = !0x0), _0x12aa7d || _0x24508b !== __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor$2d$cloud$2d$services$2d$collaboration$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["WEB_SOCKET_GATEWAY_STATES"]['CONNECTED'] ? __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor$2d$cloud$2d$services$2d$collaboration$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["WEB_SOCKET_GATEWAY_STATES"]['DISCONNECTED'] : this['state'] == __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor$2d$cloud$2d$services$2d$collaboration$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["WEB_SOCKET_GATEWAY_STATES"]['DISCONNECTED'] && this['_shouldPluginsReconnect'] ? (this['_shouldPluginsReconnect'] = !0x1, this['_reconnect'](), __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor$2d$cloud$2d$services$2d$collaboration$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["WEB_SOCKET_GATEWAY_STATES"]['CONNECTING']) : __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor$2d$cloud$2d$services$2d$collaboration$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["WEB_SOCKET_GATEWAY_STATES"]['CONNECTED'])), this['connection']['on']('error', (_0x3c8c33, _0x146bbd)=>{
                if ('limitExceeded' !== _0x146bbd['code']) throw console['error'](_0x146bbd), new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$utils$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["CKEditorError"]('cloudservices-init', null, {
                    'originalError': _0x146bbd
                });
                _0x1bea59['showWarning']('The\x20limit\x20of\x20maximum\x20concurrent\x20connections\x20that\x20the\x20collaboration\x20server\x20can\x20handle\x20has\x20been\x20reached.\x20Try\x20opening\x20the\x20document\x20again\x20in\x20a\x20few\x20minutes.\x20Please\x20contact\x20your\x20system\x20administrator\x20if\x20the\x20problem\x20persists.', {
                    'title': 'Connected\x20users\x20limit\x20exceeded',
                    'namespace': 'real-time-collaboration'
                });
            }), !_0x4b6f84['me']) return new Promise((_0x2e627e)=>_0x4b6f84['on']('change:me', _0x2e627e));
        })['catch']((_0x48d43b)=>{
            throw console['error'](_0x48d43b), new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$utils$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["CKEditorError"]('cloudservices-init', null, {
                'originalError': _0x48d43b
            });
        });
    }
    ['addToReconnectionStack'](_0x4660ae) {
        if ('function' != typeof _0x4660ae['reconnect']) throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$utils$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["CKEditorError"]('websocketgateway-invalid-plugin-interface', this);
        if (this['isInReconnectionStack'](_0x4660ae)) throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$utils$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["CKEditorError"]('websocketgateway-plugin-already-registered', this, {
            'name': _0x4660ae['constructor']['pluginName']
        });
        this['_reconnectionStack']['add'](_0x4660ae);
    }
    ['removeFromReconnectionStack'](_0x582084) {
        this['_reconnectionStack']['delete'](_0x582084);
    }
    ['isInReconnectionStack'](_0x356464) {
        return this['_reconnectionStack']['has'](_0x356464);
    }
    ['_reconnect']() {
        return this['connection']['reconnect']()['then'](()=>Promise['all'](Array['from'](this['_reconnectionStack'], (_0x19b90f)=>_0x19b90f['reconnect']())))['then'](()=>this['state'] = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor$2d$cloud$2d$services$2d$collaboration$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["WEB_SOCKET_GATEWAY_STATES"]['CONNECTED'])['catch']((_0x4cea99)=>{
            throw console['error'](_0x4cea99), new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$utils$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["CKEditorError"]('cloudservices-reconnection-error', this['context']);
        });
    }
    ['disconnect']() {
        this['connection'] && this['connection']['disconnect'](), this['state'] = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor$2d$cloud$2d$services$2d$collaboration$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["WEB_SOCKET_GATEWAY_STATES"]['DISCONNECTED'], this['_domEmitter']['stopListening']();
    }
    ['destroy']() {
        this['disconnect'](), super['destroy']();
    }
}
class i extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$core$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["ContextPlugin"] {
    ['channelSessions'];
    ['channelConnectedUsers'];
    ['allConnectedUsers'];
    ['_registeredSessions'];
    ['_uniqueUsersCount'];
    ['_users'];
    static get ['pluginName']() {
        return 'Sessions';
    }
    static get ['isOfficialPlugin']() {
        return !0x0;
    }
    static get ['isPremiumPlugin']() {
        return !0x0;
    }
    static get ['requires']() {
        return [
            c,
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$collaboration$2d$core$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Users"]
        ];
    }
    constructor(_0x56c63d){
        super(_0x56c63d), this['channelSessions'] = new Map(), this['channelConnectedUsers'] = new Map(), this['allConnectedUsers'] = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$utils$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Collection"](), this['_registeredSessions'] = new Map(), this['_uniqueUsersCount'] = 0x0, this['_users'] = this['context']['plugins']['get'](__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$collaboration$2d$core$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Users"]);
    }
    ['init']() {
        const _0x1a4cef = this['context']['plugins']['get'](c);
        this['listenTo'](_0x1a4cef, 'change:state', (_0x1e292f, _0x481023, _0xdf7870)=>{
            if ('connected' !== _0xdf7870) this['channelSessions']['forEach']((_0x11ae54)=>_0x11ae54['clear']()), this['channelConnectedUsers']['forEach']((_0x16b0cb)=>_0x16b0cb['clear']()), this['allConnectedUsers']['clear']();
            else {
                for (const [_0x54c830, _0x24aad6] of this['_registeredSessions'])for (const _0x67db2c of _0x24aad6)this['_handleSessionAdd'](_0x54c830, _0x67db2c);
            }
        }), this['_createUser'](_0x1a4cef['connection']['me'], !0x0);
    }
    ['register'](_0x36ae3b, _0x4a8db2) {
        if (this['_registeredSessions']['has'](_0x36ae3b)) throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$utils$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["CKEditorError"]('sessions-register-already-registered', null, {
            'channelId': _0x36ae3b
        });
        this['_registeredSessions']['set'](_0x36ae3b, _0x4a8db2), this['channelSessions']['set'](_0x36ae3b, new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$utils$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Collection"]()), this['channelConnectedUsers']['set'](_0x36ae3b, new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$utils$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Collection"]()), this['listenTo'](_0x4a8db2, 'add', (_0x163eeb, _0x5f3ca1)=>this['_handleSessionAdd'](_0x36ae3b, _0x5f3ca1)), this['listenTo'](_0x4a8db2, 'remove', (_0x56157d, _0x4c7cb6)=>this['_handleSessionRemove'](_0x36ae3b, _0x4c7cb6));
        for (const _0x5219c7 of _0x4a8db2)this['_handleSessionAdd'](_0x36ae3b, _0x5219c7);
    }
    ['unregister'](_0x11c81b) {
        if (!this['_registeredSessions']['has'](_0x11c81b)) throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$utils$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["CKEditorError"]('sessions-unregister-not-exist', null, {
            'channelId': _0x11c81b
        });
        const _0x414f05 = this['_registeredSessions']['get'](_0x11c81b);
        this['stopListening'](_0x414f05);
        for (const _0xaf9818 of _0x414f05)'connected' === this['context']['plugins']['get'](c)['state'] && this['_handleSessionRemove'](_0x11c81b, _0xaf9818);
        this['_registeredSessions']['delete'](_0x11c81b), this['channelSessions']['delete'](_0x11c81b), this['channelConnectedUsers']['delete'](_0x11c81b);
    }
    get ['mySessionId']() {
        return this['context']['plugins']['get'](c)['connection']['sessionId'];
    }
    ['getUserBySessionId'](_0x41f163) {
        for (const _0x36aeb4 of this['channelSessions']['values']())for (const _0x12ad82 of _0x36aeb4)if (_0x12ad82['id'] === _0x41f163) return _0x12ad82['user'];
    }
    ['getUserSessions'](_0x1863a6, _0x788fbf) {
        const _0x5650b6 = _0x788fbf ? [
            this['channelSessions']['get'](_0x788fbf)
        ] : this['channelSessions']['values'](), _0x346832 = new Set();
        for (const _0x3c7b60 of _0x5650b6)for (const _0x41782a of _0x3c7b60)_0x41782a['user']['id'] === _0x1863a6['id'] && _0x346832['add'](_0x41782a['id']);
        return _0x346832;
    }
    ['getUserRole'](_0xeb15cf) {
        for (const _0x246f0e of this['channelSessions']['values']())for (const _0x583cb5 of _0x246f0e)if (_0x583cb5['user'] === _0xeb15cf) return _0x583cb5['role'];
    }
    ['_handleSessionAdd'](_0x5bb701, _0x1f6bb2) {
        if ('connected' !== this['context']['plugins']['get'](c)['state']) return;
        const _0x54e224 = _0x1f6bb2['user'], _0x41b5bf = this['_users']['getUser'](_0x54e224['id']) || this['_createUser'](_0x54e224), _0x1ef0a6 = Object['assign']({}, _0x1f6bb2, {
            'user': _0x41b5bf
        });
        this['channelSessions']['get'](_0x5bb701)['add'](_0x1ef0a6);
        const _0x207bbe = this['channelConnectedUsers']['get'](_0x5bb701);
        _0x207bbe['has'](_0x41b5bf['id']) || _0x207bbe['add'](_0x41b5bf), this['allConnectedUsers']['has'](_0x41b5bf['id']) || this['allConnectedUsers']['add'](_0x41b5bf, _0x41b5bf['isMe'] ? 0x0 : void 0x0), this['fire']('sessionAdd:' + _0x5bb701, {
            'channelId': _0x5bb701,
            'session': _0x1ef0a6
        });
    }
    ['_handleSessionRemove'](_0x2d8d2f, _0x583b87) {
        if ('connected' !== this['context']['plugins']['get'](c)['state']) return;
        const _0x3f2ccc = this['channelConnectedUsers']['get'](_0x2d8d2f), _0x4c37df = _0x583b87['user'];
        _0x4c37df['id'] && (this['channelSessions']['get'](_0x2d8d2f)['remove'](_0x583b87['id']), _0x3f2ccc['has'](_0x4c37df['id']) && !this['getUserSessions'](_0x4c37df, _0x2d8d2f)['size'] && _0x3f2ccc['remove'](_0x4c37df['id']), this['allConnectedUsers']['get'](_0x4c37df['id']) && !this['getUserSessions'](_0x4c37df)['size'] && this['allConnectedUsers']['remove'](_0x4c37df['id']));
    }
    ['_createUser'](_0x3c141f, _0x22833b) {
        const _0x41c9ae = this['_users']['addUser'](_0x3c141f);
        return _0x22833b && this['_users']['defineMe'](_0x3c141f['id']), _0x41c9ae['orderNumber'] = this['_uniqueUsersCount']++, _0x41c9ae;
    }
}
class N extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$core$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Plugin"] {
    ['_domEmitter'] = new ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$utils$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["DomEmitterMixin"])())();
    static get ['requires']() {
        return [
            i
        ];
    }
    static get ['pluginName']() {
        return 'UserMarkers';
    }
    static get ['isOfficialPlugin']() {
        return !0x0;
    }
    static get ['isPremiumPlugin']() {
        return !0x0;
    }
    ['init']() {
        const _0x1f6fb6 = this['editor'], _0x490b2c = _0x1f6fb6['plugins']['get'](i);
        _0x1f6fb6['conversion']['for']('editingDowncast')['markerToElement']({
            'model': 'user:position',
            'view': (_0x2c3faf, { writer: _0x47fbc3 })=>(function(_0x728223, _0x18a9e3, _0x475e0b, _0x5a2d7f) {
                    const _0x2ca9b0 = _0x728223['markerName']['split'](':')[0x2], _0x41eccb = _0x475e0b['getUserBySessionId'](_0x2ca9b0);
                    if (!_0x41eccb || _0x2ca9b0 === _0x475e0b['mySessionId']) return;
                    if (!_0x5a2d7f['model']['schema']['checkChild'](_0x728223['markerRange']['start'], '$text')) return;
                    const _0x593642 = {
                        'class': 'ck-user__marker\x20' + _0x41eccb['color']['getMarkerClass'](),
                        'data-name': _0x41eccb['name'],
                        'data-session-id': _0x2ca9b0
                    }, _0x8e0b76 = _0x5a2d7f['model']['markers']['get'](_0x728223['markerName']), _0x150d0b = _0x8e0b76['getStart'](), _0x31a35d = _0x150d0b['nodeAfter'], _0x22c0b5 = _0x5a2d7f['model']['schema'];
                    if (_0x31a35d && _0x22c0b5['isObject'](_0x31a35d) && _0x22c0b5['isInline'](_0x31a35d) && !_0x5a2d7f['model']['markers']['get']('user:range:' + _0x2ca9b0)['getRange']()['isCollapsed']) return;
                    const _0x1f3a73 = _0x150d0b['parent'];
                    return _0x5a2d7f['model']['schema']['isLimit'](_0x1f3a73) && !_0x5a2d7f['model']['hasContent'](_0x1f3a73) && (_0x593642['contenteditable'] = !0x1), function(_0x5e885a, _0xd49327, _0x28a7b9) {
                        const _0x127226 = _0x5e885a['createUIElement']('span', _0xd49327);
                        return _0x5e885a['setCustomProperty']('userPositionMarker', !0x0, _0x127226), _0x127226['render'] = function(_0x5038cc) {
                            const _0x1b9b17 = this['toDomElement'](_0x5038cc), _0x1c6894 = document['createElement']('span');
                            return _0x1c6894['classList']['add']('ck-user__marker-tooltip'), _0x1c6894['setAttribute']('contenteditable', 'false'), _0x1c6894['setAttribute']('spellcheck', 'false'), _0x1c6894['textContent'] = _0x28a7b9['name'], _0x1b9b17['innerHTML'] = '⁠<span\x20class=\x22ck-user__marker-line\x22\x20contenteditable=\x22false\x22><span\x20class=\x22ck-user__marker-dot\x22></span></span>' + _0x1c6894['outerHTML'] + '⁠', _0x1b9b17['addEventListener']('mouseenter', ()=>{
                                _0x1b9b17['classList']['add']('ck-user__marker_hovered');
                            }), _0x1b9b17['addEventListener']('mouseleave', ()=>{
                                _0x1b9b17['classList']['remove']('ck-user__marker_hovered');
                            }), _0x1b9b17;
                        }, _0x127226['isSimilar'] = function(_0x5425f6) {
                            return !(!this['getCustomProperty']('userPositionMarker') || !_0x5425f6['getCustomProperty']('userPositionMarker') || this['getAttribute']('data-session-id') != _0x5425f6['getAttribute']('data-session-id'));
                        }, _0x127226;
                    }(_0x18a9e3, _0x593642, _0x41eccb);
                })(_0x2c3faf, _0x47fbc3, _0x490b2c, _0x1f6fb6)
        }), _0x1f6fb6['conversion']['for']('editingDowncast')['markerToHighlight']({
            'model': 'user:range',
            'view': (_0x34d4c6)=>(function(_0x26cc35, _0x4e9a57) {
                    const _0x403040 = _0x26cc35['markerName']['split'](':')[0x2];
                    if (_0x403040 === _0x4e9a57['mySessionId']) return null;
                    const _0x1fb6f7 = _0x4e9a57['getUserBySessionId'](_0x403040);
                    if (!_0x1fb6f7) return {
                        'id': _0x403040,
                        'classes': []
                    };
                    return {
                        'id': _0x403040,
                        'classes': [
                            'ck-user__selection',
                            _0x1fb6f7['color']['getSelectionClass']()
                        ],
                        'attributes': {
                            'data-session-id': _0x403040
                        },
                        'priority': 0x7d0 + _0x1fb6f7['orderNumber']
                    };
                })(_0x34d4c6, _0x490b2c)
        }), function(_0x5978bb) {
            const _0x124cc6 = _0x5978bb['model'], _0x24e9a3 = new Map(), _0x3fa851 = _0x5978bb['plugins']['get'](i);
            _0x124cc6['markers']['on']('update:user:range', (_0x56cd91, _0x18fe3b, _0x3925a7, _0x373dda)=>{
                if (!_0x373dda && _0x24e9a3['get'](_0x18fe3b['name'])) return _0x24e9a3['get'](_0x18fe3b['name'])['detach'](), void _0x24e9a3['delete'](_0x18fe3b['name']);
                const _0x2ac3b4 = _0x18fe3b['name']['split'](':')[0x2];
                if (_0x2ac3b4 === _0x3fa851['mySessionId']) return;
                const _0x51960b = 'user:position:' + _0x2ac3b4;
                _0x124cc6['markers']['has'](_0x51960b) && _0x5978bb['editing']['reconvertMarker'](_0x51960b), _0x18fe3b['on']('change:range', (_0x41595a, _0x8b5022, _0x307062)=>{
                    if ('$graveyard' != _0x8b5022['root']['rootName'] && '$graveyard' == _0x18fe3b['getRange']()['root']['rootName'] && !_0x24e9a3['has'](_0x18fe3b['name'])) {
                        const _0x244ba5 = _0x124cc6['schema']['getNearestSelectionRange'](_0x307062['deletionPosition']);
                        if (_0x244ba5) {
                            const _0x4d63aa = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$engine$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["LiveRange"]['fromRange'](_0x244ba5);
                            _0x24e9a3['set'](_0x18fe3b['name'], _0x4d63aa), _0x4d63aa['on']('change:range', (_0x5c8f2c, _0x428f75, _0x2db71b)=>{
                                if ('$graveyard' == _0x4d63aa['root']['rootName']) {
                                    const _0x3c933f = _0x124cc6['schema']['getNearestSelectionRange'](_0x2db71b['deletionPosition']);
                                    _0x3c933f ? (_0x4d63aa['start'] = _0x3c933f['start'], _0x4d63aa['end'] = _0x3c933f['end']) : (_0x24e9a3['delete'](_0x18fe3b['name']), _0x4d63aa['detach']());
                                }
                            });
                        }
                    }
                });
            }), _0x124cc6['document']['on']('change', ()=>{
                _0x24e9a3['size'] > 0x0 && _0x124cc6['enqueueChange']({
                    'isUndoable': !0x1
                }, (_0x38f985)=>{
                    for (const [_0x2dfad7, _0x24c9d0] of _0x24e9a3)'$graveyard' == _0x124cc6['markers']['get'](_0x2dfad7)['getRange']()['root']['rootName'] && (Q(_0x2dfad7['split'](':')[0x2], _0x24c9d0['toRange'](), _0x124cc6, _0x38f985), _0x24c9d0['detach']());
                    _0x24e9a3['clear']();
                });
            });
        }(_0x1f6fb6), this['_domEmitter']['listenTo'](__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$utils$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["global"]['document'], 'keydown', (_0x22ecc6, { key: _0x21190a })=>{
            'Escape' === _0x21190a && function(_0x981806) {
                _0x981806['editing']['view']['change']((_0x46a89d)=>{
                    for (const _0x2059f4 of _0x981806['model']['markers']){
                        if (!_0x2059f4['name']['startsWith']('user:position')) continue;
                        const _0x1c1c19 = _0x981806['editing']['mapper']['markerNameToElements'](_0x2059f4['name']);
                        if (_0x1c1c19) {
                            for (const _0x26e430 of _0x1c1c19)_0x46a89d['removeClass']('ck-user__marker_hovered', _0x26e430);
                        }
                    }
                });
            }(_0x1f6fb6);
        }, {
            'useCapture': !0x0
        });
    }
    ['afterInit']() {
        const _0x126e47 = this['editor'], _0x148bba = _0x126e47['commands']['get']('undo');
        _0x148bba && _0x126e47['model']['on']('applyOperation', (_0x598aa1, _0x316f4b)=>{
            const _0x4044be = _0x316f4b[0x0];
            if (!_0x4044be['isDocumentOperation']) return;
            if ('marker' != _0x4044be['type'] || !_0x4044be['name']['startsWith']('user:')) return;
            const _0x2972d3 = _0x4044be['batch'];
            _0x148bba['_createdBatches']['has'](_0x2972d3) && (_0x4044be['newRange'] = _0x4044be['oldRange'] ? _0x126e47['model']['createRange'](_0x4044be['oldRange']['start'], _0x4044be['oldRange']['end']) : null);
        }, {
            'priority': 'highest'
        });
    }
    ['destroy']() {
        return this['_domEmitter']['stopListening'](), super['destroy']();
    }
    ['createUserMarkerOperations']() {
        const _0x29020e = this['editor'], _0x2467c6 = _0x29020e['model']['document'], _0x220dcf = _0x29020e['plugins']['get'](i);
        _0x29020e['model']['enqueueChange']({
            'isUndoable': !0x1
        }, (_0x30c153)=>{
            const _0x108fb0 = 'user:range:' + _0x220dcf['mySessionId'], _0x9530d0 = 'user:position:' + _0x220dcf['mySessionId'], _0x28ac32 = _0x29020e['model']['markers']['has'](_0x108fb0);
            _0x29020e['editing']['view']['hasDomSelection'] ? Q(_0x220dcf['mySessionId'], _0x2467c6['selection']['getFirstRange'](), _0x29020e['model'], _0x30c153) : _0x28ac32 && (_0x30c153['removeMarker'](_0x108fb0), _0x30c153['removeMarker'](_0x9530d0));
        });
    }
}
function Q(_0x19bd70, _0x28daf8, _0x1b4c88, _0x14ca6a) {
    const _0x4223fb = 'user:range:' + _0x19bd70, _0x4de93a = 'user:position:' + _0x19bd70, _0x4f6530 = _0x28daf8['getContainedElement']();
    let _0x5a949c = _0x28daf8['start'];
    _0x4f6530 && _0x4f6530['is']('element', 'tableCell') && (_0x5a949c = function(_0x1a8cbe, _0x3554d7) {
        for (const _0x125dc8 of _0x1a8cbe['getPositions']())if (_0x3554d7['schema']['checkChild'](_0x125dc8, '$text')) return _0x125dc8;
    }(_0x28daf8, _0x1b4c88), _0x28daf8 = _0x14ca6a['createRange'](_0x5a949c));
    const _0x1ef03f = _0x14ca6a['createRange'](_0x5a949c);
    _0x1b4c88['markers']['has'](_0x4223fb) ? (_0x14ca6a['updateMarker'](_0x4223fb, {
        'range': _0x28daf8
    }), _0x14ca6a['updateMarker'](_0x4de93a, {
        'range': _0x1ef03f
    })) : (_0x14ca6a['addMarker'](_0x4223fb, {
        'range': _0x28daf8,
        'usingOperation': !0x0
    }), _0x14ca6a['addMarker'](_0x4de93a, {
        'range': _0x1ef03f,
        'usingOperation': !0x0
    }));
}
function B(_0xb7027a, _0x464f77, _0x11024e) {
    const _0x65b790 = _0xb7027a['t'], t = _0xb7027a['t'];
    switch(_0x464f77){
        case 'PENDING_ACTION_SENDING_DATA':
            return t({
                'string': 'Sending\x20data\x20to\x20the\x20server.',
                'id': 'PENDING_ACTION_SENDING_DATA'
            });
        case 'The\x20local\x20document\x20and\x20server\x20document\x20differ\x20and\x20merging\x20them\x20can\x20cause\x20unexpected\x20behavior.\x20To\x20not\x20lose\x20your\x20content\x20save\x20it\x20locally\x20and\x20refresh\x20the\x20editor.':
            return t('The\x20local\x20document\x20and\x20server\x20document\x20differ\x20and\x20merging\x20them\x20can\x20cause\x20unexpected\x20behavior.\x20To\x20not\x20lose\x20your\x20content\x20save\x20it\x20locally\x20and\x20refresh\x20the\x20editor.');
        case 'The\x20document\x20cannot\x20be\x20connected\x20back\x20to\x20the\x20server.\x20To\x20not\x20lose\x20your\x20content\x20save\x20it\x20locally\x20and\x20refresh\x20the\x20editor.':
            return t('The\x20document\x20cannot\x20be\x20connected\x20back\x20to\x20the\x20server.\x20To\x20not\x20lose\x20your\x20content\x20save\x20it\x20locally\x20and\x20refresh\x20the\x20editor.');
        case 'The\x20document\x20details\x20could\x20not\x20be\x20taken\x20during\x20the\x20reconnection.\x20To\x20not\x20lose\x20your\x20content\x20save\x20it\x20locally\x20and\x20refresh\x20the\x20editor.':
            return t('The\x20document\x20details\x20could\x20not\x20be\x20taken\x20during\x20the\x20reconnection.\x20To\x20not\x20lose\x20your\x20content\x20save\x20it\x20locally\x20and\x20refresh\x20the\x20editor.');
        case 'The\x20last\x20saved\x20version\x20of\x20the\x20document\x20does\x20not\x20match\x20the\x20local\x20version.\x20To\x20not\x20lose\x20your\x20content\x20save\x20it\x20locally\x20and\x20refresh\x20the\x20editor.':
            return t('The\x20last\x20saved\x20version\x20of\x20the\x20document\x20does\x20not\x20match\x20the\x20local\x20version.\x20To\x20not\x20lose\x20your\x20content\x20save\x20it\x20locally\x20and\x20refresh\x20the\x20editor.');
        case 'Synchronization\x20issue':
            return t('Synchronization\x20issue');
        case 'Connected\x20users\x20list\x20dropdown\x20menu':
            return t('Connected\x20users\x20list\x20dropdown\x20menu');
        case 'Collapsed\x20connected\x20users\x20list\x20(press\x20ENTER\x20to\x20open\x20it)':
            return t('Collapsed\x20connected\x20users\x20list\x20(press\x20ENTER\x20to\x20open\x20it)');
        case 'Connected\x20users\x20list':
            return t('Connected\x20users\x20list');
        case 'PENDING_ACTION_REVISION_HISTORY':
            return _0x65b790({
                'string': 'Unsaved\x20change\x20in\x20revision\x20history.',
                'id': 'PENDING_ACTION_REVISION_HISTORY'
            });
        case 'CONNECTED_USERS':
            return t({
                'string': '1\x20connected\x20user\x20(me)',
                'plural': '%0\x20connected\x20users',
                'id': 'CONNECTED_USERS'
            }, _0x11024e);
        default:
            return '';
    }
}
let F = 0x1;
class l extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$core$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Plugin"] {
    static ['CollaborativeEditingService'] = (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor$2d$cloud$2d$services$2d$collaboration$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["CollaborativeEditingService"])();
    ['_offset'];
    ['sessionId'];
    ['serverHistory'];
    ['_channelId'];
    ['_service'];
    ['_document'];
    ['_compressor'];
    ['_bufferedOperations'];
    ['_knownOperations'];
    ['_knownRootNames'];
    ['_pendingAction'];
    ['_hasSelectionChanged'];
    ['_sendBufferedOperationsDelayId'];
    ['_baseBufferDelay'];
    ['_currentBufferDelay'];
    ['_lastSyncedOperationId'];
    ['_disconnectionOperations'];
    ['_operationIdentifier'];
    static get ['requires']() {
        return [
            c,
            i,
            N,
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$core$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PendingActions"],
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$collaboration$2d$core$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Users"],
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$ui$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Notification"]
        ];
    }
    static get ['pluginName']() {
        return 'RealTimeCollaborationClient';
    }
    static get ['isOfficialPlugin']() {
        return !0x0;
    }
    static get ['isPremiumPlugin']() {
        return !0x0;
    }
    get ['cloudDocumentVersion']() {
        return this['_lastServerVersion'] + this['_offset'];
    }
    get ['_lastServerVersion']() {
        return this['serverHistory']['version'] - this['_offset'];
    }
    get ['lastSyncVersion']() {
        const _0x3b4634 = this['serverHistory']['getOperations']();
        for(let _0x4c184e = _0x3b4634['length'] - 0x1; _0x4c184e >= 0x0; _0x4c184e--){
            const _0x25aa87 = _0x3b4634[_0x4c184e];
            if (!this['_disconnectionOperations']['has'](_0x25aa87)) return _0x25aa87['baseVersion'] + 0x1 - this['_offset'];
        }
        return 0x0;
    }
    constructor(_0x36041e){
        if (super(_0x36041e), this['_offset'] = 0x0, this['sessionId'] = null, this['serverHistory'] = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$engine$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["History"](), this['editor']['config']['define']('collaboration', {}), this['_channelId'] = this['editor']['config']['get']('collaboration.channelId'), !this['_channelId']) throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$utils$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["CKEditorError"]('collaboration-missing-channelid', this);
        const _0x3fd0bb = _0x36041e['config']['get']('cloudServices.bundleVersion') || __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$utils$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["version"];
        this['_service'] = new l['CollaborativeEditingService'](_0x3fd0bb, this['_channelId']), this['_document'] = this['editor']['model']['document'], this['_compressor'] = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$operations$2d$compressor$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Compressor"](), this['_bufferedOperations'] = [], this['_knownOperations'] = new WeakSet(), this['_knownRootNames'] = new Set(), this['set']('_isPendingUpdate', !0x1), this['set']('_hasSynchronizationProblem', !0x1), this['_pendingAction'] = null, this['_hasSelectionChanged'] = !0x1, this['_sendBufferedOperationsDelayId'] = null, this['_baseBufferDelay'] = 0x12c, this['_currentBufferDelay'] = this['_baseBufferDelay'], this['_lastSyncedOperationId'] = null, this['_disconnectionOperations'] = new WeakSet(), this['_operationIdentifier'] = new G(this['_disconnectionOperations']);
    }
    ['init']() {
        const _0x4d767b = this['editor'], _0x3da38b = _0x4d767b['plugins']['get'](__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$collaboration$2d$core$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Users"]), _0x3a290f = _0x4d767b['plugins']['get'](c);
        this['listenTo'](_0x3da38b, 'getOperationAuthor', (_0x16743e, _0xbb8238)=>{
            const _0x413b44 = _0xbb8238[0x0];
            _0x413b44['_authorId'] && (_0x16743e['return'] = _0x3da38b['getUser'](_0x413b44['_authorId']), _0x16743e['stop']()), null === _0x413b44['_authorId'] && (_0x16743e['return'] = null, _0x16743e['stop']());
        }, {
            'priority': 'high'
        }), this['listenTo'](_0x4d767b['model']['document']['selection'], 'change:range', (_0x28bc06, _0x3f221f)=>{
            _0x3f221f['directChange'] && this['_refreshUserSelectionMarkers']();
        }), this['listenTo'](_0x4d767b['editing']['view'], 'change:hasDomSelection', ()=>{
            this['_refreshUserSelectionMarkers']();
        }), this['_initThrowingOnDataSet'](), _0x4d767b['model']['on']('applyOperation', (_0x3579c5, _0x42de0b)=>{
            const _0x5e7b2a = _0x42de0b[0x0];
            _0x5e7b2a['isDocumentOperation'] && (this['_saveOperationInBuffer'](_0x5e7b2a), this['_shouldSendUpdate']() && this['_sendBufferedOperationsDelayed']());
        }), this['_setUpDataInit'](), this['bind']('_isEditingAllowed')['to'](_0x3a290f, 'state', this, '_hasSynchronizationProblem', (_0x28b4ff, _0x57b49d)=>'connected' === _0x28b4ff && !_0x57b49d), this['on']('change:_isEditingAllowed', ()=>{
            this['_isEditingAllowed'] ? _0x4d767b['disableReadOnlyMode']('rtc-offline') : _0x4d767b['enableReadOnlyMode']('rtc-offline');
        }), this['_isEditingAllowed'] ? _0x4d767b['disableReadOnlyMode']('rtc-offline') : _0x4d767b['enableReadOnlyMode']('rtc-offline'), this['set']('_isConnected', !0x1);
    }
    async ['reconnect']() {
        const _0x11cd18 = this['editor']['plugins']['get'](i), _0x3f9e0b = this['editor']['plugins']['get'](c);
        try {
            this['_isPendingUpdate'] = !0x0, _0x11cd18['unregister'](this['_channelId']);
            const _0x2609ad = await this['_service']['reconnect'](_0x3f9e0b['connection'], this['lastSyncVersion']);
            await this['_handleReconnectionResponse'](_0x2609ad) && (this['_isPendingUpdate'] = !0x1, this['_clearPendingAction']());
            const _0x19bb9e = await this['_service']['getConnectedSessions']();
            _0x11cd18['register'](this['_channelId'], _0x19bb9e), this['_handleSendingSelectionMarkers'](), this['_isConnected'] = !0x0;
        } catch (_0x149df0) {
            if (function(_0x574fbb) {
                return '404' === _0x574fbb['code'];
            }(_0x149df0) && this['sessionId']) await this['_connectAfterSessionHasBeenFlushed']();
            else {
                if (function(_0x27bc1d) {
                    return '409' === _0x27bc1d['code'];
                }(_0x149df0)) {
                    const _0xc2f886 = B(this['editor']['locale'], 'The\x20document\x20cannot\x20be\x20connected\x20back\x20to\x20the\x20server.\x20To\x20not\x20lose\x20your\x20content\x20save\x20it\x20locally\x20and\x20refresh\x20the\x20editor.');
                    this['_handleReconnectionError'](_0xc2f886);
                } else {
                    if (!(_0x149df0 instanceof H)) throw _0x149df0;
                    this['_handleReconnectionError']();
                }
            }
        }
    }
    ['destroy']() {
        const _0x12ee96 = this['editor']['plugins']['get'](c), _0xa7a412 = this['editor']['plugins']['get'](i);
        this['editor']['enableReadOnlyMode']('rtc-destroyed'), _0xa7a412['channelSessions']['has'](this['_channelId']) && _0xa7a412['unregister'](this['_channelId']), _0x12ee96['removeFromReconnectionStack'](this), this['_disconnectService'](), super['destroy']();
    }
    async ['_handleReconnectionResponse'](_0xb4bbe2) {
        if (this['sessionId'] !== _0xb4bbe2['sessionId'] && this['_lastSyncedOperationId'] !== _0xb4bbe2['lastOperationId']) throw new H();
        return this['sessionId'] = _0xb4bbe2['sessionId'], this['_handleServerResponse']([], {
            ..._0xb4bbe2,
            'wereChangesApplied': !0x1,
            'data': _0xb4bbe2['data']
        }, 'reconnect');
    }
    async ['_connectService'](_0x46a815, _0xd36cab = !0x1) {
        const { connection: _0x3c370f } = this['editor']['plugins']['get'](c);
        l['CollaborativeEditingService']['getConnectedSessions'](_0x3c370f, this['_channelId'])['then']((_0x116189)=>this['_initSessionsHandling'](_0x116189))['catch']((_0x20e0c9)=>{
            this['_crash']('realtimecollaborationclient-init-session-connection-error', _0x20e0c9);
        }), this['listenTo'](this['_service'], 'operationsReceived', this['_handleReceivedOperations']['bind'](this)), this['listenTo'](this['_service'], 'error', (_0x11878a, _0x3ffd90)=>{
            this['_crash']('realtimecollaborationclient-init-service-internal-error', _0x3ffd90);
        }), this['listenTo'](this['_service'], 'disconnected', ()=>{
            this['_isConnected'] = !0x1;
        });
        const _0x33780d = this['_operationIdentifier']['getIdOfTheLastOperation'](_0x46a815);
        this['_isPendingUpdate'] = !0x0;
        const _0xff7250 = await this['_service']['connect'](_0x3c370f, this['_compressOperations'](_0x46a815), _0x33780d);
        if (this['sessionId'] = _0xff7250['sessionId'], _0xd36cab) {
            if (!_0xff7250['wereChangesApplied']) return void this['_handleReconnectionError']();
            this['_isPendingUpdate'] = !0x1, this['_clearPendingAction'](), this['serverHistory']['reset'](), this['_offset'] = _0xff7250['offset'], this['serverHistory']['version'] = this['_offset'], await this['_handleServerResponse'](_0x46a815, _0xff7250, 'reconnection:\x20flushed\x20session');
        } else await this['_handleInitialConnectionData'](_0xff7250, _0x46a815);
        this['_handleSendingSelectionMarkers'](), this['_isConnected'] = !0x0;
    }
    ['_handleSendingSelectionMarkers']() {
        const _0x284d8b = this['editor']['plugins']['get'](i), _0x6b9efb = this['editor']['plugins']['get'](N), _0x432262 = _0x284d8b['channelSessions']['get'](this['_channelId']);
        _0x432262 && _0x432262['length'] > 0x1 ? _0x6b9efb['createUserMarkerOperations']() : this['listenTo'](_0x284d8b, 'sessionAdd:' + this['_channelId'], ()=>{
            0x2 === _0x284d8b['channelSessions']['get'](this['_channelId'])['length'] && _0x6b9efb['createUserMarkerOperations']();
        });
    }
    async ['_handleReceivedOperations'](_0x4c2ad7, _0x1f8892, _0x4a130a, _0x2fa72a) {
        if (!this['_isPendingUpdate'] && this['_document']['version'] == _0x1f8892) {
            const _0x3d737a = this['_decompressOperations'](_0x4a130a, _0x2fa72a);
            await this['_fetchMissingUsers'](_0x3d737a), this['_handleExternalOperations'](_0x3d737a, _0x1f8892, _0x4a130a['lastOperationId']) || this['_crash']('realtimecollaborationclient-init-service-incorrect-server-operation');
        }
    }
    async ['_connectAfterSessionHasBeenFlushed']() {
        this['_disconnectService']();
        const { locale: _0xd489cc } = this['editor'];
        let _0x407629;
        try {
            _0x407629 = await this['_service']['getDocumentDetails']();
        } catch (_0x40d5b8) {
            const _0x3b2bfa = B(_0xd489cc, 'The\x20document\x20details\x20could\x20not\x20be\x20taken\x20during\x20the\x20reconnection.\x20To\x20not\x20lose\x20your\x20content\x20save\x20it\x20locally\x20and\x20refresh\x20the\x20editor.');
            return void this['_handleReconnectionError'](_0x3b2bfa);
        }
        const _0x5a81c6 = _0x407629['currentDocumentSession'] || _0x407629['lastDocumentSession'];
        if (this['_lastSyncedOperationId'] === _0x5a81c6['lastOperationId']) await this['_connectService'](this['editor']['model']['document']['history']['getOperations'](), !0x0);
        else {
            const _0x35bc3f = B(_0xd489cc, 'The\x20last\x20saved\x20version\x20of\x20the\x20document\x20does\x20not\x20match\x20the\x20local\x20version.\x20To\x20not\x20lose\x20your\x20content\x20save\x20it\x20locally\x20and\x20refresh\x20the\x20editor.');
            this['_handleReconnectionError'](_0x35bc3f);
        }
    }
    ['_disconnectService']() {
        this['_service']['disconnect'](), this['_bufferedOperations'] = [], clearTimeout(this['_sendBufferedOperationsDelayId']), this['stopListening'](this['_service']);
    }
    ['_initSessionsHandling'](_0x5e6590) {
        const _0x4683e7 = this['editor']['plugins']['get'](i);
        this['listenTo'](_0x4683e7, 'sessionAdd:' + this['_channelId'], (_0x8e23ab, { session: _0x38bdab })=>{
            if (_0x38bdab['id'] === _0x4683e7['mySessionId']) {
                _0x8e23ab['off']();
                const _0xe87f03 = this['editor']['plugins']['has']('CommentsOnly') && this['editor']['plugins']['get']('CommentsOnly');
                let _0x2c1fef = _0x38bdab['permissions'];
                _0xe87f03 && _0xe87f03['isEnabled'] && (_0x2c1fef = _0x2c1fef['filter']((_0x56241c)=>'document:write' !== _0x56241c)), this['editor']['plugins']['get']('Permissions')['setPermissions'](_0x2c1fef, this['_channelId']);
            }
        }), _0x4683e7['register'](this['_channelId'], _0x5e6590);
    }
    ['_initThrowingOnDataSet']() {
        const _0x5c0fad = this['editor']['data']['set'];
        this['editor']['data']['set'] = (..._0x1d99bd)=>{
            if (!_0x1d99bd[_0x1d99bd['length'] - 0x1]['suppressErrorInCollaboration']) throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$utils$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["CKEditorError"]('realtimecollaborationclient-editor-setdata-and-editor-data-set-are-forbidden-in-real-time-collaboration', this);
            _0x5c0fad['apply'](this['editor']['data'], _0x1d99bd);
        };
    }
    ['_setUpDataInit']() {
        this['editor']['data']['on']('init', (_0x243399, [_0x9dc0f3])=>{
            if (this['_document']['version']) throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$utils$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["CKEditorError"]('realtimecollaborationclient-init-document-already-initialized', this);
            _0x243399['stop'](), this['_setPendingAction']();
            const _0x27d16e = this['editor']['config']['get']('rootsAttributes'), _0xb23385 = this['_getOperationsFromInitData'](_0x9dc0f3, _0x27d16e);
            0x0 == _0xb23385['length'] && _0xb23385['push'](new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$engine$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["NoOperation"](0x0)), _0x243399['return'] = this['_connectService'](_0xb23385)['then'](()=>{
                this['editor']['plugins']['get'](c)['addToReconnectionStack'](this), this['editor']['data']['fire']('ready');
            })['catch']((_0x4c5f85)=>this['_crash']('realtimecollaborationclient-init-connection-failed', _0x4c5f85))['finally'](()=>this['_clearPendingAction']());
        }, {
            'priority': 'high'
        }), this['editor']['on']('loadRoot', async (_0x5c0edd, [_0x2c801a, _0x528600])=>{
            _0x5c0edd['stop']();
            const _0xff09dc = this['editor']['model']['document']['getRoot'](_0x2c801a);
            if (!this['_knownRootNames']['has'](_0x2c801a)) {
                const _0x3d94a8 = _0x528600 && _0x528600['data'] ? _0x528600['data'] : '', _0x37b9bb = _0x528600 && _0x528600['attributes'] ? _0x528600['attributes'] : {};
                await this['_loadRoot'](_0x2c801a, _0x3d94a8, _0x37b9bb);
            }
            this['editor']['model']['enqueueChange']({
                'isUndoable': !0x1
            }, ()=>{
                _0xff09dc['_isLoaded'] = !0x0, this['editor']['model']['document']['differ']['_bufferRootLoad'](_0xff09dc);
            });
        }, {
            'priority': 'high'
        });
    }
    async ['_fetchMissingUsers'](_0x59e485) {
        const _0x1cf1c2 = this['editor']['plugins']['get'](__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$collaboration$2d$core$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Users"]), { connection: _0x18ca76 } = this['editor']['plugins']['get'](c), _0x2b433d = new Set();
        for (const _0x847af5 of _0x59e485){
            const _0x2d74e8 = _0x847af5['_authorId'];
            _0x2d74e8 && !_0x1cf1c2['getUser'](_0x2d74e8) && _0x2b433d['add'](_0x2d74e8);
        }
        if (0x0 === _0x2b433d['size']) return;
        const _0x336689 = await __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor$2d$cloud$2d$services$2d$collaboration$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["User"]['getMany'](_0x18ca76, Array['from'](_0x2b433d));
        for (const _0x1de374 of _0x336689)_0x1cf1c2['getUser'](_0x1de374['id']) || _0x1cf1c2['addUser'](_0x1de374);
    }
    ['_getOperationsFromInitData'](_0x19778b, _0x312bbe = {}) {
        const _0x2e2084 = this['editor']['model'], _0x40fded = [];
        let _0x3279ed = 0x0;
        const _0x461a4e = 'string' == typeof _0x19778b ? {
            'main': _0x19778b
        } : _0x19778b;
        for (const _0x3d96cc of Object['keys'](_0x461a4e)){
            if (!this['_document']['roots']['has'](_0x3d96cc)) throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$utils$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["CKEditorError"]('realtimecollaborationclient-init-non-existent-root', this);
            const _0x574717 = this['editor']['data']['parse'](_0x461a4e[_0x3d96cc]), _0x3a5d7b = this['_document']['getRoot'](_0x3d96cc), _0x179b3b = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$engine$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["InsertOperation"](_0x2e2084['createPositionAt'](_0x3a5d7b, 0x0), _0x574717, _0x3279ed++);
            _0x40fded['push'](_0x179b3b);
            for (const [_0x422031, _0x308635] of _0x574717['markers']){
                const _0x58bbe3 = _0x2e2084['createRange'](_0x2e2084['createPositionFromPath'](_0x3a5d7b, _0x308635['start']['path']['slice']()), _0x2e2084['createPositionFromPath'](_0x3a5d7b, _0x308635['end']['path']['slice']())), _0x6e5c2d = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$engine$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["MarkerOperation"](_0x422031, null, _0x58bbe3, _0x2e2084['markers'], !0x0, _0x3279ed++);
                _0x40fded['push'](_0x6e5c2d);
            }
        }
        if (_0x312bbe) for (const [_0x26ed9d, _0x30229e] of Object['entries'](_0x312bbe)){
            const _0x957198 = _0x2e2084['document']['getRoot'](_0x26ed9d);
            if (!_0x957198) throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$utils$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["CKEditorError"]('multi-root-editor-root-attributes-no-root', null);
            for (const [_0x44d615, _0x83108e] of Object['entries'](_0x30229e))if (null !== _0x83108e) {
                const _0x351f63 = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$engine$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["RootAttributeOperation"](_0x957198, _0x44d615, null, _0x83108e, _0x3279ed++);
                _0x40fded['push'](_0x351f63);
            }
        }
        return _0x40fded;
    }
    async ['_loadRoot'](_0x44a7f1, _0x563408, _0x19a348) {
        this['_getOperationsFromInitData']({
            [_0x44a7f1]: _0x563408
        }, {
            [_0x44a7f1]: _0x19a348
        })['forEach']((_0x181023, _0x2308cf)=>{
            _0x181023['baseVersion'] = this['_document']['version'] + _0x2308cf, _0x181023['_isInit'] = !0x0, this['_saveOperationInBuffer'](_0x181023);
        }), this['_sendBufferedOperationsDelayed'](), await this['_waitUntilSynced']();
    }
    async ['_handleInitialConnectionData'](_0xefbb03, _0x20558a) {
        let _0x56481f;
        this['_offset'] = _0xefbb03['offset'];
        const _0x302ed0 = _0xefbb03['wereChangesApplied'] && !_0xefbb03['initData'], _0x46d850 = _0x302ed0 ? 0x0 : _0xefbb03['data']['baseVersion'];
        if (_0x20558a['forEach']((_0x51907e)=>{
            _0x51907e['_isInit'] = !0x0, _0x51907e['createdAt'] = _0xefbb03['sessionCreatedAt'], _0x51907e['_authorId'] = null;
        }), _0x302ed0) _0x56481f = _0x20558a, this['_applyOperationsSet'](_0x56481f, _0x302ed0);
        else {
            if (_0xefbb03['initData']) {
                const _0x27ae0d = this['_getOperationsFromInitData'](_0xefbb03['initData']);
                this['_document']['history']['version'] = -_0x27ae0d['length'], _0x27ae0d['forEach']((_0xe10402)=>{
                    _0xe10402['baseVersion'] -= _0x27ae0d['length'], _0xe10402['createdAt'] = _0xefbb03['sessionCreatedAt'], _0xe10402['_isInit'] = !0x0, _0xe10402['_authorId'] = null;
                }), this['_applyOperationsSet'](_0x27ae0d, !0x0), this['serverHistory']['version'] = -_0x27ae0d['length'] + this['_offset'], this['_updateServerHistory'](_0x27ae0d);
            }
            this['_document']['history']['version'] = _0x46d850, _0x56481f = this['_decompressOperations'](_0xefbb03['data'], _0xefbb03['metadata']), await this['_fetchMissingUsers'](_0x56481f), this['_applyOperationsSet'](_0x56481f, _0x302ed0);
        }
        _0xefbb03['lastOperationId'] && (this['_operationIdentifier']['setIdForTheLastOperation'](_0x56481f, _0xefbb03['lastOperationId']), this['_lastSyncedOperationId'] = _0xefbb03['lastOperationId']), this['serverHistory']['version'] = _0x46d850 + this['_offset'], this['_updateServerHistory'](_0x56481f), _0x20558a['filter']((_0x241f23)=>{
            const _0x7706d6 = this['_getAffectedRoot'](_0x241f23);
            return _0x7706d6 && !this['_knownRootNames']['has'](_0x7706d6);
        })['forEach']((_0x3b4d7f, _0x5def24)=>{
            _0x3b4d7f['baseVersion'] = this['_document']['version'] + _0x5def24, this['_saveOperationInBuffer'](_0x3b4d7f);
        }), this['_shouldSendUpdate']() ? (this['_currentBufferDelay'] = 0x0, this['_sendBufferedOperationsDelayed'](!0x0), await this['_waitUntilSynced']()) : (this['_isPendingUpdate'] = !0x1, this['_clearPendingAction']());
    }
    ['_crash'](_0x15d012, _0xc21cf9) {
        const _0x4bf078 = _0xc21cf9 && _0xc21cf9['message'];
        if (_0x4bf078 && _0x4bf078['startsWith']('realtimecollaborationclient')) throw _0xc21cf9;
        const _0x3883d5 = this['editor']['plugins']['get'](c);
        throw this['_isPendingUpdate'] = !0x0, _0x3883d5['disconnect'](), this['editor']['enableReadOnlyMode']('realtimecollaborationclient-error'), new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$utils$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["CKEditorError"](_0x15d012, this['editor'], _0x4bf078 ? {
            'originalError': _0x4bf078
        } : void 0x0);
    }
    ['_saveOperationInBuffer'](_0x1a588e) {
        this['_knownOperations']['has'](_0x1a588e) || (this['_knownOperations']['add'](_0x1a588e), this['_bufferedOperations']['push'](_0x1a588e), this['_pendingAction'] || 'marker' == _0x1a588e['type'] && !_0x1a588e['affectsData'] || this['_setPendingAction']());
    }
    ['_sendBufferedOperationsDelayed'](_0x1067f6 = !0x1) {
        !_0x1067f6 && this['_isPendingUpdate'] || (this['_isPendingUpdate'] = !0x0, clearTimeout(this['_sendBufferedOperationsDelayId']), this['_sendBufferedOperationsDelayId'] = setTimeout(()=>{
            this['_sendBufferedOperations']()['then']((_0x31e2e4)=>{
                _0x31e2e4 && (this['_clearPendingAction'](), this['_isPendingUpdate'] = !0x1);
            })['catch']((_0x46fb6d)=>{
                this['_clearPendingAction'](), this['_isPendingUpdate'] = !0x1, function(_0x4823ca) {
                    return _0x4823ca['message']['startsWith']('cloud-services-internal-error:\x20Not\x20connected.') || _0x4823ca['message']['startsWith']('cloud-services-internal-error:\x20Collaborative\x20Editing\x20Service\x20is\x20not\x20connected.') || _0x4823ca['message']['startsWith']('cloud-services-internal-error:\x20Request\x20timeout.');
                }(_0x46fb6d) || this['_crash'](_0x46fb6d['message'], _0x46fb6d);
            });
        }, this['_currentBufferDelay']));
    }
    ['_waitUntilSynced']() {
        return new Promise((_0x1d608c)=>{
            this['on']('change:_isPendingUpdate', ()=>{
                _0x1d608c();
            });
        });
    }
    async ['_sendBufferedOperations']() {
        const _0x5b178d = this['editor']['plugins']['get'](N);
        if (this['_shouldSendSelectionUpdate']() && (_0x5b178d['createUserMarkerOperations'](), this['_hasSelectionChanged'] = !0x1), !this['_shouldSendUpdate']()) return !0x0;
        const _0x40c3b9 = [
            ...this['_bufferedOperations']
        ];
        for (const _0x14ac8c of _0x40c3b9)_0x14ac8c['wasUndone'] = this['_document']['history']['isUndoneOperation'](_0x14ac8c);
        const _0x3d01d5 = this['_operationIdentifier']['getIdOfTheLastOperation'](_0x40c3b9), _0x26b022 = F++, _0x14d7fd = this['_compressOperations'](_0x40c3b9), _0x1caeaf = await this['_service']['sendOperations'](_0x14d7fd, _0x14d7fd['baseVersion'], _0x3d01d5);
        try {
            return await this['_handleServerResponse'](_0x40c3b9, _0x1caeaf, _0x26b022);
        } catch (_0x5018c9) {
            return this['_crash']('realtimecollaborationclient-sendbufferedoperations', _0x5018c9);
        }
    }
    async ['_handleServerResponse'](_0x4bd2ae, _0x79ef14, _0x48fb3d) {
        if ('error' in _0x79ef14) throw _0x79ef14['error'];
        let _0xaecd1e = !0x1;
        if (_0x79ef14['wereChangesApplied']) {
            _0x79ef14['lastOperationId'] && (this['_lastSyncedOperationId'] = _0x79ef14['lastOperationId']), this['_bufferedOperations'] = this['_bufferedOperations']['filter']((_0x15f788)=>!_0x4bd2ae['includes'](_0x15f788));
            for (const _0x3ae82f of _0x4bd2ae)_0x3ae82f['createdAt'] = 'lastOperationAcceptedAt' in _0x79ef14 && _0x79ef14['lastOperationAcceptedAt'] || void 0x0;
            q(_0x4bd2ae, _0x79ef14['version'] - _0x4bd2ae['length']), this['_updateServerHistory'](_0x4bd2ae);
            const _0x2744d1 = _0x4bd2ae['filter']((_0x4d1e6f)=>{
                if (!_0x4d1e6f['_isInit']) return !0x1;
                const _0x1ee824 = this['_getAffectedRoot'](_0x4d1e6f);
                return _0x1ee824 && !this['_knownRootNames']['has'](_0x1ee824);
            });
            q(_0x2744d1, this['_document']['version']), this['_applyOperationsSet'](_0x2744d1), _0xaecd1e = !0x0, this['_currentBufferDelay'] = this['_baseBufferDelay'];
        } else {
            const _0x145c70 = this['_decompressOperations'](_0x79ef14['data'], _0x79ef14['metadata'])['filter']((_0x10e0fa)=>_0x10e0fa['baseVersion'] >= this['_lastServerVersion']);
            _0x145c70['forEach']((_0x35c702)=>this['_addKnownRoot'](_0x35c702)), this['_bufferedOperations'] = this['_bufferedOperations']['filter']((_0xd0c3ce)=>!_0xd0c3ce['_isInit'] || !this['_knownRootNames']['has'](this['_getAffectedRoot'](_0xd0c3ce))), this['_bufferedOperations']['length'] && q(this['_bufferedOperations'], this['_bufferedOperations'][0x0]['baseVersion']), await this['_fetchMissingUsers'](_0x145c70), _0xaecd1e = this['_handleExternalOperations'](_0x145c70, _0x79ef14['version'], _0x79ef14['lastOperationId']), this['_currentBufferDelay'] = Math['round'](this['_currentBufferDelay'] / 0x2);
        }
        return _0xaecd1e ? !this['_shouldSendUpdate']() || (this['_sendBufferedOperationsDelayed'](!0x0), !0x1) : this['_crash']('realtimecollaborationclient-handleserverresponse');
    }
    ['_handleExternalOperations'](_0x50411e, _0x221871, _0x326fe6) {
        try {
            const _0x401291 = {
                'document': this['_document'],
                'useRelations': !0x1,
                'padWithNoOps': !0x0
            }, { operationsA: _0x57db62, operationsB: _0x35b883, originalOperations: _0x3bcc4b } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$engine$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["transformSets"])(_0x50411e, this['_bufferedOperations'], _0x401291);
            q(_0x57db62, this['_document']['version']), q(_0x35b883, _0x221871);
            for (const _0x9cce56 of _0x57db62){
                const _0x265e5c = _0x3bcc4b['get'](_0x9cce56);
                _0x9cce56['_authorId'] = _0x265e5c ? _0x265e5c['_authorId'] : null;
            }
            _0x326fe6 && (this['_operationIdentifier']['setIdForTheLastOperation'](_0x50411e, _0x326fe6), this['_lastSyncedOperationId'] = _0x326fe6), this['_bufferedOperations'] = [
                ..._0x35b883
            ], this['_applyOperationsSet'](_0x57db62), this['_updateServerHistory'](_0x50411e);
        } catch (_0x16d06e) {
            return console['error'](_0x16d06e), !0x1;
        }
        return !0x0;
    }
    ['_applyOperationsSet'](_0x167f04, _0x2e69d6 = !0x1) {
        this['editor']['model']['enqueueChange']({
            'isUndoable': !0x1,
            'isLocal': !0x1
        }, (_0x2a6ed9)=>{
            for (const _0x241505 of _0x167f04)this['_knownOperations']['add'](_0x241505), this['_addKnownRoot'](_0x241505), _0x2a6ed9['batch']['addOperation'](_0x241505), this['editor']['model']['applyOperation'](_0x241505);
        });
    }
    ['_addKnownRoot'](_0x30b440) {
        const _0x3204ec = this['_getAffectedRoot'](_0x30b440);
        _0x3204ec && this['_knownRootNames']['add'](_0x3204ec);
    }
    ['_getAffectedRoot'](_0x56e914) {
        let _0x1d9989, _0x24aa8f;
        switch(_0x56e914['type']){
            case 'insert':
                _0x1d9989 = _0x56e914['position']['root'];
                break;
            case 'marker':
                if (_0x24aa8f = _0x56e914['newRange'], !_0x24aa8f) return null;
                _0x1d9989 = _0x24aa8f['root'];
                break;
            case 'addRootAttribute':
                _0x1d9989 = _0x56e914['root'];
                break;
            case 'addRoot':
                _0x1d9989 = _0x56e914['affectedSelectable'];
                break;
            case 'move':
                _0x1d9989 = _0x56e914['targetPosition']['root'];
                break;
            default:
                return null;
        }
        return _0x1d9989['rootName'];
    }
    ['_updateServerHistory'](_0x2bf1ca) {
        _0x2bf1ca['forEach']((_0x143f76)=>{
            const _0xecd320 = _0x143f76['clone']();
            _0xecd320['_authorId'] = _0x143f76['_authorId'], _0xecd320['_isInit'] = !!_0x143f76['_isInit'], _0xecd320['createdAt'] = _0x143f76['createdAt'], _0xecd320['baseVersion'] += this['_offset'], _0x143f76['_isDisconnection'] && this['_disconnectionOperations']['add'](_0xecd320), this['serverHistory']['addOperation'](_0xecd320);
        });
    }
    ['_handleReconnectionError'](_0x4edeff) {
        const _0x5473a1 = this['editor']['plugins']['get']('Notification'), _0x1a1876 = this['editor']['locale'];
        _0x4edeff || (_0x4edeff = B(_0x1a1876, 'The\x20local\x20document\x20and\x20server\x20document\x20differ\x20and\x20merging\x20them\x20can\x20cause\x20unexpected\x20behavior.\x20To\x20not\x20lose\x20your\x20content\x20save\x20it\x20locally\x20and\x20refresh\x20the\x20editor.')), _0x5473a1['showWarning'](_0x4edeff, {
            'title': B(_0x1a1876, 'Synchronization\x20issue'),
            'namespace': 'real-time-collaboration'
        }), this['_hasSynchronizationProblem'] = !0x0, clearTimeout(this['_sendBufferedOperationsDelayId']), this['_bufferedOperations'] = [], this['editor']['plugins']['get'](c)['disconnect']();
    }
    ['_setPendingAction']() {
        this['_pendingAction'] || (this['_pendingAction'] = this['editor']['plugins']['get'](__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$core$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PendingActions"])['add'](B(this['editor']['locale'], 'PENDING_ACTION_SENDING_DATA')));
    }
    ['_clearPendingAction']() {
        this['_pendingAction'] && (this['editor']['plugins']['get'](__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$core$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PendingActions"])['remove'](this['_pendingAction']), this['_pendingAction'] = null);
    }
    ['_compressOperations'](_0x238d27) {
        const _0x506c5d = _0x238d27['map']((_0x55e1a7)=>_0x55e1a7['toJSON']());
        return this['_compressor']['compress'](_0x506c5d);
    }
    ['_decompressOperations'](_0x348678, _0x143d1b) {
        return this['_compressor']['decompress'](_0x348678)['map']((_0x5bb38b, _0x158704)=>{
            const _0x30d56d = 'init' == _0x143d1b[_0x158704]['type'];
            if ('InsertOperation' == _0x5bb38b['__className']) {
                const _0xc5b7bb = _0x5bb38b['position']['root'];
                !this['_document']['getRoot'](_0xc5b7bb) && (this['_document']['createRoot']('$root', _0xc5b7bb)['_isAttached'] = !0x1);
            }
            const _0x23e3e7 = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$engine$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["OperationFactory"]['fromJSON'](_0x5bb38b, this['_document']);
            return _0x23e3e7['wasUndone'] = _0x5bb38b['wasUndone'], _0x23e3e7['_isInit'] = _0x30d56d, _0x23e3e7['_authorId'] = _0x30d56d ? null : _0x143d1b[_0x158704]['userId'], _0x23e3e7['_isDisconnection'] = 'cs:removeUser' === _0x143d1b[_0x158704]['type'], _0x23e3e7['createdAt'] = _0x143d1b[_0x158704]['createdAt'], _0x23e3e7;
        });
    }
    ['_refreshUserSelectionMarkers']() {
        this['_hasSelectionChanged'] = !0x0, this['_shouldSendSelectionUpdate']() ? this['_sendBufferedOperationsDelayed']() : this['_hasSelectionChanged'] = !0x1;
    }
    ['_shouldSendSelectionUpdate']() {
        const _0x2fcacf = this['editor']['plugins']['get'](i)['channelSessions']['get'](this['_channelId']);
        return !this['editor']['isReadOnly'] && !!_0x2fcacf && _0x2fcacf['length'] > 0x1 && this['_hasSelectionChanged'];
    }
    ['_shouldSendUpdate']() {
        return this['_bufferedOperations']['length'] > 0x0 || this['_shouldSendSelectionUpdate']();
    }
}
class H extends Error {
}
function q(_0x477548, _0x371415) {
    for (const _0x150be4 of _0x477548)_0x150be4['baseVersion'] = _0x371415++;
}
class G {
    ['_ignoredOperations'];
    ['_operationToId'];
    constructor(_0x110fe4){
        this['_ignoredOperations'] = _0x110fe4, this['_operationToId'] = new WeakMap();
    }
    ['getIdOfTheLastOperation'](_0x50c544) {
        let _0x21c567 = _0x50c544['length'];
        for(; _0x21c567--;){
            const _0x202291 = _0x50c544[_0x21c567];
            if (!this['_ignoredOperations']['has'](_0x202291)) {
                if (!this['_operationToId']['has'](_0x202291)) {
                    const _0x572b84 = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$utils$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["uid"])()['slice'](0x1, 0x12);
                    this['_operationToId']['set'](_0x202291, _0x572b84);
                }
                return this['_operationToId']['get'](_0x202291);
            }
        }
    }
    ['setIdForTheLastOperation'](_0x42a38c, _0x115f83) {
        if (!_0x115f83) return;
        let _0x53028b = _0x42a38c['length'];
        for(; _0x53028b--;){
            const _0x514ae5 = _0x42a38c[_0x53028b];
            this['_ignoredOperations']['has'](_0x514ae5) || this['_operationToId']['set'](_0x514ae5, _0x115f83);
        }
    }
}
class n extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$core$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Plugin"] {
    static get ['requires']() {
        return [
            l
        ];
    }
    static get ['pluginName']() {
        return 'RealTimeCollaborativeEditing';
    }
    static get ['isOfficialPlugin']() {
        return !0x0;
    }
    static get ['isPremiumPlugin']() {
        return !0x0;
    }
}
class a extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$core$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["ContextPlugin"] {
    static ['CommentsService'] = (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor$2d$cloud$2d$services$2d$collaboration$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["CommentsService"])();
    ['_services'];
    static get ['requires']() {
        return [
            c,
            'CommentsRepository',
            i,
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$collaboration$2d$core$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Users"]
        ];
    }
    static get ['pluginName']() {
        return 'CloudServicesCommentsAdapter';
    }
    static get ['isOfficialPlugin']() {
        return !0x0;
    }
    static get ['isPremiumPlugin']() {
        return !0x0;
    }
    constructor(_0x4059bc){
        super(_0x4059bc), this['_services'] = new Map();
    }
    async ['init']() {
        const _0xb26f27 = this['context'], _0x424597 = _0xb26f27['plugins']['get']('CommentsRepository');
        if (_0xb26f27['plugins']['get'](c)['addToReconnectionStack'](this), _0x424597['adapter'] = {
            'addCommentThread': async ({ channelId: _0x3bcbd0, threadId: _0x508bf9, comments: _0x51d4b9, resolvedAt: _0x576054, resolvedBy: _0x4f49d5, context: _0x48330c, attributes: _0x835866 })=>{
                const _0x5be0a1 = await this['_getService'](_0x3bcbd0)['addCommentThread']({
                    'commentThreadId': _0x508bf9,
                    'comments': _0x51d4b9['map']((_0x45ee3f)=>(function(_0xcf3002, _0x57a4c5, _0x53bd15) {
                            return {
                                'commentThreadId': _0x53bd15,
                                'commentId': _0xcf3002['commentId'],
                                'userId': _0xcf3002['authorId'],
                                'content': _0xcf3002['content'],
                                'documentId': _0x57a4c5,
                                'createdAt': _0xcf3002['createdAt'],
                                'attributes': _0xcf3002['attributes'] || {}
                            };
                        })(_0x45ee3f, _0x3bcbd0, _0x508bf9)),
                    'resolvedAt': _0x576054,
                    'resolvedBy': _0x4f49d5,
                    'context': _0x48330c,
                    'attributes': _0x835866
                })['catch'](gt);
                return {
                    'threadId': _0x5be0a1['commentThreadId'],
                    'comments': _0x5be0a1['comments']
                };
            },
            'getCommentThread': async ({ channelId: _0x2ade70, threadId: _0x54bd1c })=>{
                const _0x10ab08 = await this['_getService'](_0x2ade70)['getCommentThread'](_0x54bd1c)['catch'](gt);
                return _0x10ab08['deletedAt'] ? null : (await this['_fetchMissingUsersForThreads']([
                    _0x10ab08
                ]), {
                    'threadId': _0x10ab08['commentThreadId'],
                    'comments': _0x10ab08['comments']['map'](nt),
                    'context': _0x10ab08['context'],
                    'resolvedAt': _0x10ab08['resolvedAt'],
                    'resolvedBy': _0x10ab08['resolvedBy'],
                    'attributes': _0x10ab08['attributes'] || {}
                });
            },
            'updateCommentThread': async ({ channelId: _0x262e56, threadId: _0x7022c1, context: _0x43cd04, unlinkedAt: _0x1829e3, attributes: _0xa1d92b })=>this['_getService'](_0x262e56)['updateCommentThread']({
                    'commentThreadId': _0x7022c1,
                    'context': _0x43cd04,
                    'attributes': _0xa1d92b,
                    'unlinkedAt': _0x1829e3
                })['catch'](et)['catch'](gt),
            'resolveCommentThread': async ({ channelId: _0x46c45e, threadId: _0x2bc06f })=>{
                const _0x560a52 = await this['_getService'](_0x46c45e)['resolveCommentThread'](_0x2bc06f)['catch'](et)['catch'](gt);
                return {
                    'threadId': _0x560a52['commentThreadId'],
                    'resolvedAt': _0x560a52['resolvedAt'],
                    'resolvedBy': _0x560a52['resolvedBy']
                };
            },
            'reopenCommentThread': async ({ channelId: _0x2a56f4, threadId: _0xd894d0 })=>this['_getService'](_0x2a56f4)['reopenCommentThread'](_0xd894d0)['catch'](et)['catch'](gt),
            'removeCommentThread': ({ channelId: _0x283905, threadId: _0x4374c8 })=>this['_getService'](_0x283905)['removeCommentThread'](_0x4374c8)['catch'](et)['catch'](gt),
            'addComment': ({ channelId: _0x1c1aa5, threadId: _0x23e56e, commentId: _0xf98d8e, content: _0x3d5174, attributes: _0x1a14e })=>this['_getService'](_0x1c1aa5)['addComment'](_0x23e56e, _0xf98d8e, _0x3d5174, _0x1a14e)['catch'](gt),
            'updateComment': ({ channelId: _0x1c7509, threadId: _0xea7e94, commentId: _0x6709a0, content: _0x2a4584, attributes: _0xc016ac })=>this['_getService'](_0x1c7509)['updateComment'](_0xea7e94, _0x6709a0, _0x2a4584, _0xc016ac)['catch'](et)['catch'](gt),
            'removeComment': ({ channelId: _0x5b6b7e, threadId: _0x47eebf, commentId: _0x581b3f })=>this['_getService'](_0x5b6b7e)['removeComment'](_0x47eebf, _0x581b3f)['catch'](et)['catch'](gt)
        }, _0xb26f27 instanceof __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$core$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Context"]) {
            const _0x305473 = _0xb26f27['config']['get']('collaboration.channelId'), _0x3378ae = _0xb26f27['plugins']['get'](i);
            await this['_setUpService'](_0x305473);
            const _0x460bad = await this['_services']['get'](_0x305473)['getConnectedSessions']();
            this['listenTo'](_0x3378ae, 'sessionAdd:' + _0x305473, (_0x9afd2, { session: _0x357f82 })=>{
                _0x357f82['id'] === _0x3378ae['mySessionId'] && (_0x9afd2['off'](), this['context']['plugins']['get']('Permissions')['setPermissions'](_0x357f82['permissions'], _0x305473));
            }), _0x3378ae['register'](_0x305473, _0x460bad);
        }
    }
    async ['_setUpService'](_0x329511) {
        if (this['_services']['has'](_0x329511)) throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$utils$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["CKEditorError"]('cloudservicescommentsadapter-connect-already-connected', null, {
            'channelId': _0x329511
        });
        const _0x18ee09 = this['context']['plugins']['get']('CommentsRepository'), _0x303e0e = new a['CommentsService'](_0x329511);
        this['_services']['set'](_0x329511, _0x303e0e), this['listenTo'](_0x303e0e, 'commentThreadAdded', (_0x141c3f, _0x5c6b48)=>{
            const { commentThreadId: _0x56273e, documentId: _0x4bdb26, context: _0x5c421c, attributes: _0x186920, resolvedAt: _0x53ebfa, resolvedBy: _0xe770d4, comments: _0x166f69 } = _0x5c6b48;
            _0x18ee09['getCommentThread'](_0x56273e) || _0x18ee09['addCommentThread']({
                'threadId': _0x56273e,
                'channelId': _0x4bdb26,
                'comments': _0x166f69 ? _0x166f69['map'](nt) : [],
                'context': _0x5c421c,
                'attributes': _0x186920,
                'resolvedAt': _0x53ebfa,
                'resolvedBy': _0xe770d4,
                'isFromAdapter': !0x0
            });
        }), this['listenTo'](_0x303e0e, 'commentThreadUpdated', (_0x57ec26, { commentThreadId: _0x23d7ce, documentId: _0x2cc1cd, context: _0x135644, unlinkedAt: _0x46f5dd, attributes: _0x39699b })=>{
            _0x18ee09['getCommentThread'](_0x23d7ce) && _0x18ee09['updateCommentThread']({
                'threadId': _0x23d7ce,
                'channelId': _0x2cc1cd,
                'context': _0x135644,
                'unlinkedAt': _0x46f5dd,
                'attributes': _0x39699b,
                'isFromAdapter': !0x0
            });
        }), this['listenTo'](_0x303e0e, 'commentThreadResolved', (_0x2aa5f4, { commentThreadId: _0x5403e6, resolvedBy: _0xc07fa1, resolvedAt: _0x49bb7d })=>{
            const _0x1052cf = _0x18ee09['getCommentThread'](_0x5403e6);
            _0x1052cf && _0x1052cf['resolve']({
                'resolvedBy': _0xc07fa1,
                'resolvedAt': _0x49bb7d,
                'isFromAdapter': !0x0
            });
        }), this['listenTo'](_0x303e0e, 'commentThreadReopened', (_0x3cf1ae, { commentThreadId: _0x17c425 })=>{
            const _0xd7ddb1 = _0x18ee09['getCommentThread'](_0x17c425);
            _0xd7ddb1 && _0xd7ddb1['reopen']({
                'isFromAdapter': !0x0
            });
        }), this['listenTo'](_0x303e0e, 'commentThreadRemoved', (_0xbe0847, { commentThreadId: _0x345da4 })=>{
            const _0x4f503d = _0x18ee09['getCommentThread'](_0x345da4);
            _0x4f503d && _0x4f503d['remove']({
                'isFromAdapter': !0x0
            });
        }), this['listenTo'](_0x303e0e, 'commentAdded', (_0x5d05ff, _0x52c4f5)=>{
            const _0x4a9904 = _0x52c4f5['commentThreadId'], _0x4e3f01 = _0x18ee09['getCommentThread'](_0x4a9904);
            _0x4e3f01 && _0x4e3f01['addComment']({
                ...nt(_0x52c4f5),
                'isFromAdapter': !0x0
            });
        }), this['listenTo'](_0x303e0e, 'commentUpdated', (_0x5f44f5, { commentThreadId: _0x3d0148, commentId: _0x2c18ad, content: _0x464611, attributes: _0x48871f })=>{
            const _0x3f4578 = _0x18ee09['getCommentThread'](_0x3d0148);
            if (_0x3f4578) {
                const _0xb04f17 = _0x3f4578['getComment'](_0x2c18ad);
                _0xb04f17 && _0xb04f17['update']({
                    'content': _0x464611,
                    'attributes': _0x48871f,
                    'isFromAdapter': !0x0
                });
            }
        }), this['listenTo'](_0x303e0e, 'commentRemoved', (_0x184e2d, { commentThreadId: _0xfd2ee8, commentId: _0x5c540d })=>{
            const _0x5a0822 = _0x18ee09['getCommentThread'](_0xfd2ee8);
            if (_0x5a0822) {
                const _0x4b22de = _0x5a0822['getComment'](_0x5c540d);
                _0x4b22de && _0x4b22de['remove']({
                    'isFromAdapter': !0x0
                });
            }
        }), await this['_connectService'](_0x329511);
    }
    ['destroy']() {
        if (this['context'] instanceof __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$core$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Context"]) {
            const _0x5c448f = this['context']['config']['get']('collaboration.channelId');
            this['_terminateService'](_0x5c448f);
        }
    }
    ['_terminateService'](_0x7b8a2f) {
        if (!this['_services']['has'](_0x7b8a2f)) throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$utils$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["CKEditorError"]('cloudservicescommentsadapter-disconnect-not-exist', null, {
            'channelId': _0x7b8a2f
        });
        this['_getService'](_0x7b8a2f)['disconnect'](), this['_services']['delete'](_0x7b8a2f);
    }
    async ['reconnect']() {
        for (const _0x3e1fb8 of this['_services']['keys']())await this['_connectService'](_0x3e1fb8);
        if (this['context'] instanceof __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$core$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Context"]) {
            const _0x340b6c = this['context']['config']['get']('collaboration.channelId'), _0x4d70f4 = this['context']['plugins']['get'](i);
            _0x4d70f4['unregister'](_0x340b6c);
            const _0x28f1d4 = await this['_services']['get'](_0x340b6c)['getConnectedSessions']();
            _0x4d70f4['register'](_0x340b6c, _0x28f1d4);
        }
    }
    async ['_connectService'](_0x21d9a3) {
        const { connection: _0x2f7b13 } = this['context']['plugins']['get'](c), _0x4aa5fb = this['context']['plugins']['get']('CommentsRepository'), _0x38db1d = this['_services']['get'](_0x21d9a3), _0x2b02d2 = await _0x38db1d['connect'](_0x2f7b13);
        await this['_fetchMissingUsersForThreads'](_0x2b02d2);
        const _0x929f44 = new Set(Array['from'](_0x4aa5fb['getCommentThreads']({
            'channelId': _0x21d9a3
        }), (_0x41e437)=>_0x41e437['id']));
        for (const _0x498908 of _0x2b02d2)_0x498908['deletedAt'] || _0x929f44['delete'](_0x498908['commentThreadId']);
        for (const _0x2b5991 of _0x929f44)_0x4aa5fb['getCommentThread'](_0x2b5991)['remove']({
            'isFromAdapter': !0x0
        });
        for (const _0x273296 of _0x2b02d2){
            let _0x419ad1 = _0x4aa5fb['getCommentThread'](_0x273296['commentThreadId']);
            const { commentThreadId: _0x57d10f, context: _0xf69ae8, attributes: _0x31dbda, resolvedBy: _0x28d598, resolvedAt: _0x37d30c, unlinkedAt: _0x2fa88d, deletedAt: _0x4e6801 } = _0x273296;
            if (_0x4e6801) continue;
            _0x419ad1 || (_0x419ad1 = _0x4aa5fb['addCommentThread']({
                'channelId': _0x21d9a3,
                'threadId': _0x57d10f,
                'context': _0xf69ae8,
                'attributes': _0x31dbda || {},
                'resolvedBy': _0x28d598,
                'resolvedAt': _0x37d30c,
                'unlinkedAt': _0x2fa88d,
                'isFromAdapter': !0x0
            }));
            const _0x2f1e88 = new Set(Array['from'](_0x419ad1['comments'], (_0x50bf72)=>_0x50bf72['id']));
            for (const _0x148a43 of _0x273296['comments'])_0x2f1e88['delete'](_0x148a43['commentId']);
            for (const _0x208cb7 of _0x2f1e88)_0x419ad1['getComment'](_0x208cb7)['remove']({
                'isFromAdapter': !0x0
            });
            for (const _0x49720b of _0x273296['comments']){
                const _0x168cba = _0x419ad1['getComment'](_0x49720b['commentId']);
                _0x168cba ? _0x168cba['content'] !== _0x49720b['content'] && _0x168cba['update']({
                    'content': _0x49720b['content'],
                    'isFromAdapter': !0x0
                }) : _0x419ad1['addComment'](Object['assign'](nt(_0x49720b), {
                    'isFromAdapter': !0x0
                }));
            }
        }
    }
    ['_getService'](_0x1ffa18) {
        if (!this['_services']['has'](_0x1ffa18)) throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$utils$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["CKEditorError"]('cloudservicescommentsadapter-service-not-exist', null, {
            'channelId': _0x1ffa18
        });
        return this['_services']['get'](_0x1ffa18);
    }
    async ['_fetchMissingUsersForThreads'](_0x3600e2) {
        const _0x369331 = this['context']['plugins']['get'](__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$collaboration$2d$core$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Users"]), { connection: _0x2d0d92 } = this['context']['plugins']['get'](c), _0x541c36 = new Set();
        for (const { resolvedBy: _0x2e2840, comments: _0x38a3c8 } of _0x3600e2){
            _0x2e2840 && !_0x369331['getUser'](_0x2e2840) && _0x541c36['add'](_0x2e2840);
            for (const { userId: _0x4296c0 } of _0x38a3c8)_0x369331['getUser'](_0x4296c0) || _0x541c36['add'](_0x4296c0);
        }
        if (0x0 === _0x541c36['size']) return;
        const _0x1bbfb8 = await __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor$2d$cloud$2d$services$2d$collaboration$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["User"]['getMany'](_0x2d0d92, Array['from'](_0x541c36));
        for (const _0x54c4c8 of _0x1bbfb8)_0x369331['getUser'](_0x54c4c8['id']) || _0x369331['addUser'](_0x54c4c8);
    }
}
async function et(_0x15ec2c) {
    if ('404' !== _0x15ec2c['code']) throw _0x15ec2c;
}
function gt(_0xf9956a) {
    if ((_0x1b187a = _0xf9956a)['message']['startsWith']('cloud-services-internal-error:\x20Comments\x20Service\x20is\x20not\x20connected.') || _0x1b187a['message']['startsWith']('cloud-services-internal-error:\x20Not\x20connected.') || _0x1b187a['message']['startsWith']('cloud-services-internal-error:\x20Request\x20timeout.')) return new Promise(()=>{});
    var _0x1b187a;
    throw _0xf9956a;
}
function nt(_0x358465) {
    return {
        'threadId': _0x358465['commentThreadId'],
        'commentId': _0x358465['commentId'],
        'content': _0x358465['content'],
        'createdAt': _0x358465['createdAt'],
        'authorId': _0x358465['userId'],
        'attributes': _0x358465['attributes'] || {}
    };
}
class f extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$core$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Plugin"] {
    static ['TrackChangesService'] = (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor$2d$cloud$2d$services$2d$collaboration$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["TrackChangesService"])();
    ['_bufferedRequests'];
    ['_trackChangesService'];
    static get ['requires']() {
        return [
            a,
            'TrackChangesEditing',
            c
        ];
    }
    static get ['pluginName']() {
        return 'CloudServicesTrackChangesAdapter';
    }
    static get ['isOfficialPlugin']() {
        return !0x0;
    }
    static get ['isPremiumPlugin']() {
        return !0x0;
    }
    constructor(_0x71a148){
        super(_0x71a148);
        const _0x5c2c24 = this['editor']['config']['get']('collaboration.channelId');
        this['_bufferedRequests'] = new Map(), this['_trackChangesService'] = new f['TrackChangesService'](_0x5c2c24);
    }
    ['init']() {
        const _0x5d35ee = this['editor']['plugins']['get'](c), _0xa96b04 = this['editor']['plugins']['get']('TrackChangesEditing');
        return _0xa96b04['adapter'] = {
            'getSuggestion': async (_0x477243)=>{
                await this['_waitForServiceReady']();
                const _0x5407ec = await this['_trackChangesService']['get'](_0x477243)['catch'](ot);
                return await this['_fetchMissingUsersForThreads']([
                    _0x5407ec
                ]), _0x5407ec;
            },
            'addSuggestion': async ({ id: _0x3284ec, type: _0x395e57, data: _0xb05262, originalSuggestionId: _0x1cfbc7, attributes: _0x3e4a42 })=>{
                await this['_waitForServiceReady']();
                const _0x2d3c22 = {
                    'id': _0x3284ec,
                    'type': _0x395e57,
                    'data': _0xb05262,
                    'originalSuggestionId': _0x1cfbc7,
                    'attributes': _0x3e4a42
                }, _0x397e3e = await this['_trackChangesService']['add'](_0x3284ec, _0x395e57, _0xb05262, _0x1cfbc7, _0x3e4a42)['catch']((_0x57a6dc)=>{
                    if (wt(_0x57a6dc)) return new Promise((_0x2914c9)=>{
                        this['_bufferedRequests']['set'](_0x3284ec, {
                            'resolve': _0x2914c9,
                            'suggestionData': _0x2d3c22
                        });
                    });
                    throw _0x57a6dc;
                });
                return this['_bufferedRequests']['delete'](_0x3284ec), _0x397e3e;
            },
            'updateSuggestion': async (_0x3cac26, _0x463027)=>{
                if (await this['_waitForServiceReady'](), 'open' !== _0x463027['state']) return this['_trackChangesService']['update'](_0x3cac26, _0x463027)['catch'](ot);
            }
        }, this['listenTo'](this['_trackChangesService'], 'suggestionUpdated', (_0x89dba1, _0x2ad3aa)=>{
            _0xa96b04['hasSuggestion'](_0x2ad3aa['id']) && (_0xa96b04['getSuggestion'](_0x2ad3aa['id'])['attributes'] = _0x2ad3aa['attributes']);
        }), this['_trackChangesService']['connect'](_0x5d35ee['connection'])['then']((_0xaa44ce)=>(_0x5d35ee['addToReconnectionStack'](this), this['_fetchMissingUsersForThreads'](_0xaa44ce)['then'](()=>{
                for (const _0x23a564 of _0xaa44ce){
                    _0xa96b04['addSuggestionData'](_0x23a564)['_saved'] = !0x0;
                }
            })));
    }
    async ['reconnect']() {
        const _0x1d94d8 = this['editor']['plugins']['get']('TrackChangesEditing'), { connection: _0x5ab1af } = this['editor']['plugins']['get'](c), _0x38a86d = await this['_trackChangesService']['connect'](_0x5ab1af);
        await this['_fetchMissingUsersForThreads'](_0x38a86d);
        for (const { suggestionData: _0x445f72, resolve: _0x384adf } of this['_bufferedRequests']['values']()){
            let _0x2139aa = _0x38a86d['find']((_0x4ade21)=>_0x4ade21['id'] === _0x445f72['id']);
            _0x2139aa || (_0x2139aa = await this['_trackChangesService']['add'](_0x445f72['id'], _0x445f72['type'], _0x445f72['data'], _0x445f72['originalSuggestionId'])), _0x384adf(_0x2139aa);
        }
        for (const _0x3ec17c of _0x38a86d)_0x1d94d8['hasSuggestion'](_0x3ec17c['id']) || _0x1d94d8['addSuggestionData'](_0x3ec17c);
    }
    async ['_waitForServiceReady']() {
        this['_trackChangesService']['isConnected'] || await new Promise((_0x549481)=>{
            this['listenTo'](this['_trackChangesService'], 'connected', (_0x284fee)=>{
                _0x284fee['off'](), _0x549481();
            });
        });
    }
    async ['_fetchMissingUsersForThreads'](_0x38e2f6) {
        const _0x2bc161 = this['editor']['plugins']['get'](__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$collaboration$2d$core$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Users"]), { connection: _0x15b99d } = this['editor']['plugins']['get'](c), _0x32bbb0 = new Set();
        for (const { authorId: _0xab26c1 } of _0x38e2f6)_0x2bc161['getUser'](_0xab26c1) || _0x32bbb0['add'](_0xab26c1);
        if (0x0 === _0x32bbb0['size']) return;
        const _0x260ee6 = await __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor$2d$cloud$2d$services$2d$collaboration$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["User"]['getMany'](_0x15b99d, Array['from'](_0x32bbb0));
        for (const _0x4f068d of _0x260ee6)_0x2bc161['getUser'](_0x4f068d['id']) || _0x2bc161['addUser'](_0x4f068d);
    }
}
function ot(_0x2e7759) {
    if (wt(_0x2e7759)) return new Promise(()=>{});
    throw _0x2e7759;
}
function wt(_0x3d9f77) {
    return _0x3d9f77['message']['startsWith']('cloud-services-internal-error:\x20Not\x20connected.') || _0x3d9f77['message']['startsWith']('cloud-services-internal-error:\x20Request\x20timeout.');
}
class m extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$core$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Plugin"] {
    static get ['requires']() {
        return [
            'Comments',
            a,
            n,
            c
        ];
    }
    static get ['pluginName']() {
        return 'RealTimeCollaborativeComments';
    }
    static get ['isOfficialPlugin']() {
        return !0x0;
    }
    static get ['isPremiumPlugin']() {
        return !0x0;
    }
    ['init']() {
        const _0x770390 = this['editor']['plugins']['get'](c), _0x141c12 = this['editor']['plugins']['get']('CommentsEditing'), _0xdb2613 = this['editor']['plugins']['get'](a);
        return this['editor']['data']['once']('ready', ()=>{
            this['listenTo'](_0x770390, 'change:state', (_0x42faec, _0x34125c, _0x200d44)=>{
                _0x141c12['isThreadsLoadingPaused'] = 'connected' !== _0x200d44;
            });
        }), this['listenTo'](_0x770390, 'change:state', (_0x4ce397, _0x42d55b, _0x123024)=>{
            this['editor']['plugins']['get']('CommentsRepository')['switchReadOnly']('connected' !== _0x123024);
        }), _0xdb2613['_setUpService'](this['editor']['config']['get']('collaboration.channelId'));
    }
    ['destroy']() {
        this['editor']['plugins']['get'](a)['_terminateService'](this['editor']['config']['get']('collaboration.channelId')), super['destroy']();
    }
}
class p extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$core$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Plugin"] {
    static get ['requires']() {
        return [
            m,
            f,
            'TrackChanges'
        ];
    }
    static get ['pluginName']() {
        return 'RealTimeCollaborativeTrackChanges';
    }
    static get ['isOfficialPlugin']() {
        return !0x0;
    }
    static get ['isPremiumPlugin']() {
        return !0x0;
    }
}
class u extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$core$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Plugin"] {
    static ['RevisionHistoryService'] = (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor$2d$cloud$2d$services$2d$collaboration$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["RevisionHistoryService"])();
    ['_lastRequestId'];
    ['_revisionTracker'];
    ['_revisionHistoryService'];
    ['_oldOffset'];
    static get ['requires']() {
        return [
            c,
            l,
            'RevisionTracker',
            i,
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$collaboration$2d$core$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Users"]
        ];
    }
    static get ['pluginName']() {
        return 'CloudServicesRevisionHistoryAdapter';
    }
    static get ['isOfficialPlugin']() {
        return !0x0;
    }
    static get ['isPremiumPlugin']() {
        return !0x0;
    }
    constructor(_0x289980){
        super(_0x289980);
        const _0x3544ae = this['editor']['config']['get']('collaboration.channelId');
        this['_lastRequestId'] = null, this['_revisionTracker'] = this['editor']['plugins']['get']('RevisionTracker'), this['_revisionHistoryService'] = new u['RevisionHistoryService'](_0x3544ae);
    }
    async ['init']() {
        const _0x4781f7 = this['editor']['plugins']['get'](l), _0x381095 = _0x4781f7['serverHistory'], _0x149f5e = this['editor']['plugins']['get'](c);
        this['_revisionTracker']['setSource']({
            'history': _0x381095,
            'getLatestVersion': ()=>this['_getLatestVersion'](),
            'getCurrentRevisionId': ()=>_0x4781f7['sessionId']
        });
        const _0x2311c8 = this['editor']['config']['get']('cloudServices.bundleVersion') || __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$utils$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["version"], _0x501298 = await __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor$2d$cloud$2d$services$2d$collaboration$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["EditorService"]['isBundleUploaded'](_0x149f5e['connection'], _0x2311c8);
        this['_revisionTracker']['adapter'] = {
            'getRevision': async ({ revisionId: _0x2182b0 })=>(await this['_waitForServiceReady'](), await this['_revisionHistoryService']['getRevision'](_0x2182b0)),
            'updateRevisions': async (_0x2c958e)=>{
                await this['_waitForServiceReady']();
                const _0x1c4bfe = this['_revisionTracker']['currentRevision'];
                if (_0x501298 && 0x1 === _0x2c958e['length'] && _0x2c958e[0x0]['id'] === _0x1c4bfe['id']) return _0x2c958e;
                for (const _0x2aea1b of _0x2c958e)_0x2aea1b['id'] === _0x1c4bfe['id'] && (_0x2aea1b['isEmptyCurrent'] = _0x2aea1b['fromVersion'] === _0x2aea1b['toVersion']);
                return this['_revisionHistoryService']['updateRevisions'](_0x2c958e, this['_lastRequestId'])['then']((_0x2c3345)=>(this['_lastRequestId'] = _0x2c3345, _0x2c958e))['catch']((_0x264b2d)=>{
                    if (rt(_0x264b2d) || '400' === _0x264b2d['code'] && void 0x0 !== _0x264b2d['data']['wrongRequestId']) {
                        for (const _0xf5c42d of _0x2c958e){
                            !this['_revisionTracker']['repository']['getRevision'](_0xf5c42d['id']) || this['_revisionTracker']['_bufferUpdate'](_0xf5c42d['id'], _0xf5c42d, !0x1);
                        }
                        if (rt(_0x264b2d)) throw _0x264b2d;
                        return _0x2c958e;
                    }
                    throw _0x264b2d;
                });
            }
        }, this['listenTo'](this['_revisionHistoryService'], 'revisionsUpdated', (_0x22ae47, { revisionsData: _0x3ad21d, requestId: _0x558e87 })=>{
            Math['max'](..._0x3ad21d['map']((_0x3dc57d)=>_0x3dc57d['toVersion'])) > this['_getLatestVersionFromServerOperations']() - 0x1 ? this['_getLatestVersion']()['then'](()=>{
                this['_handleRevisionsUpdate'](_0x3ad21d, _0x558e87);
            }) : this['_handleRevisionsUpdate'](_0x3ad21d, _0x558e87);
        });
        const { revisions: _0x1476c9, requestId: _0x4a5b5d } = await this['_revisionHistoryService']['connect'](_0x149f5e['connection']);
        _0x149f5e['addToReconnectionStack'](this), this['_lastRequestId'] = _0x4a5b5d, await this['_fetchMissingUsers'](_0x1476c9);
        for (const _0x1a6dfc of _0x1476c9)this['_revisionTracker']['addRevisionData'](_0x1a6dfc);
        this['listenTo'](_0x4781f7, 'change:_isConnected', (_0x5449a3, _0x2de3a6, _0x1f7ee4)=>{
            _0x1f7ee4 && (this['_oldOffset'] = _0x4781f7['_offset'], _0x5449a3['off']());
        }), this['_revisionTracker']['bind']('isEnabled')['to'](_0x149f5e, 'state', (_0x494655)=>_0x494655 === __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor$2d$cloud$2d$services$2d$collaboration$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["WEB_SOCKET_GATEWAY_STATES"]['CONNECTED']);
    }
    async ['reconnect']() {
        const _0x4a3754 = this['editor']['plugins']['get'](c), _0x1d915e = this['editor']['plugins']['get'](l), _0x6a48eb = async ()=>{
            const _0x258590 = this['_revisionTracker']['currentRevision'], _0xd3a234 = _0x258590['id'], _0x4ad30c = _0xd3a234 !== _0x1d915e['sessionId'];
            if (_0x4ad30c) {
                const _0x2bcf70 = _0x1d915e['_offset'] - this['_oldOffset'], _0x1550a8 = this['_getLatestVersionFromServerOperations']();
                this['_revisionTracker']['_revisionDataBuilder']['reInit']();
                if (_0x258590['toVersion'] + _0x2bcf70 !== _0x1550a8) {
                    const _0x3c15f7 = _0x258590['fromVersion'] + _0x2bcf70, _0x1d70f2 = this['editor']['plugins']['get'](__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$collaboration$2d$core$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Users"]), _0x3c3294 = this['_revisionTracker']['buildRevisionData']({
                        'revision': _0x258590,
                        'from': _0x3c15f7,
                        'to': _0x1550a8
                    });
                    _0x3c3294['id'] = _0x258590['id'];
                    const _0x495211 = _0x3c3294['authorsIds']['map']((_0x21df9c)=>_0x1d70f2['getUser'](_0x21df9c));
                    _0x258590['_update']({
                        ..._0x3c3294,
                        'authors': _0x495211
                    }, !0x0), this['_revisionTracker']['_bufferUpdate'](_0x258590['id'], _0x3c3294, !0x0);
                }
                this['_revisionTracker']['_startingVersion'] = _0x1550a8, _0x258590['toVersion'] === _0x258590['fromVersion'] && !this['_revisionTracker']['_bufferedUpdates']['has'](_0xd3a234) && this['_revisionTracker']['repository']['_revisions']['remove'](_0xd3a234), this['_revisionTracker']['_createCurrentRevision'](_0x1550a8);
            }
            const { revisions: _0x32ebbd, requestId: _0x298285 } = await this['_revisionHistoryService']['reconnect'](_0x4a3754['connection'], this['_lastRequestId']);
            _0x4ad30c && _0x32ebbd['length'] > 0x0 ? _0x1d915e['_handleReconnectionError']() : (await this['_fetchMissingUsers'](_0x32ebbd), this['_handleRevisionsUpdate'](_0x32ebbd, _0x298285), this['_revisionTracker']['sendBufferedUpdates']());
        };
        return _0x1d915e['_isConnected'] ? _0x6a48eb() : new Promise((_0x2c8deb, _0x3f30d1)=>{
            _0x1d915e['once']('change:_isConnected', ()=>{
                _0x6a48eb()['then'](_0x2c8deb)['catch'](_0x3f30d1);
            });
        });
    }
    ['destroy']() {
        super['destroy']();
    }
    async ['_waitForServiceReady']() {
        this['_revisionHistoryService']['isConnected'] || await new Promise((_0x1e9311)=>{
            this['listenTo'](this['_revisionHistoryService'], 'connected', (_0x1b9e5e)=>{
                _0x1b9e5e['off'](), _0x1e9311();
            });
        });
    }
    ['_getLatestVersionFromServerOperations']() {
        const _0x112060 = this['editor']['plugins']['get'](l)['serverHistory']['getOperations']()['reverse']();
        for (const _0x1f8cf7 of _0x112060)if ('marker' !== _0x1f8cf7['type'] || _0x1f8cf7['affectsData']) return _0x1f8cf7['baseVersion'] + 0x1;
    }
    ['_getLatestVersion']() {
        const _0xd91c8e = this['editor']['plugins']['get'](l);
        return new Promise((_0x3325c3)=>{
            _0xd91c8e['_isPendingUpdate'] ? _0xd91c8e['once']('change:_isPendingUpdate', ()=>{
                _0x3325c3(this['_getLatestVersionFromServerOperations']());
            }) : _0x3325c3(this['_getLatestVersionFromServerOperations']());
        });
    }
    ['_handleRevisionsUpdate'](_0x4d5267, _0x2ac8a6) {
        const _0x492115 = this['_revisionTracker']['repository'];
        this['_lastRequestId'] = _0x2ac8a6;
        for (const _0x21e4ae of _0x4d5267){
            const _0x1580a9 = _0x492115['getRevision'](_0x21e4ae['id']);
            if (_0x1580a9) {
                if ((_0x21e4ae['fromVersion'] || _0x21e4ae['toVersion']) && (_0x21e4ae['diffData'] = null), _0x1580a9 === this['_revisionTracker']['currentRevision']) {
                    const _0x21ac74 = Math['max'](_0x1580a9['toVersion'], _0x21e4ae['toVersion']), _0x2ba483 = Math['max'](_0x1580a9['fromVersion'], _0x21e4ae['fromVersion']);
                    let _0x31364a;
                    _0x1580a9['toVersion'] === _0x21e4ae['toVersion'] && _0x1580a9['fromVersion'] === _0x21e4ae['fromVersion'] ? (_0x31364a = !0x0, this['_preventResendingRevisionData'](_0x21e4ae)) : _0x21e4ae['toVersion'] === _0x21ac74 && _0x21e4ae['fromVersion'] === _0x2ba483 ? _0x31364a = !0x1 : (_0x1580a9['toVersion'] === _0x21ac74 && _0x1580a9['fromVersion'] === _0x2ba483 || this['_fixRevision']({
                        'revision': _0x1580a9,
                        'from': _0x2ba483,
                        'to': _0x21ac74
                    }), _0x31364a = !0x0), _0x31364a && (delete _0x21e4ae['fromVersion'], delete _0x21e4ae['toVersion'], delete _0x21e4ae['diffData'], delete _0x21e4ae['createdAt'], delete _0x21e4ae['authorsIds']);
                }
                this['_revisionTracker']['setRevisionData'](_0x21e4ae), this['_preventResendingRevisionData'](_0x21e4ae);
            } else this['_revisionTracker']['addRevisionData'](_0x21e4ae);
        }
        const _0x12d2d1 = _0x492115['getRevisions']();
        _0x12d2d1['reverse']();
        for(let _0x316aa8 = 0x0; _0x316aa8 < _0x12d2d1['length'] - 0x1; _0x316aa8++){
            const _0x4b68a2 = _0x12d2d1[_0x316aa8], _0x3cfce3 = _0x12d2d1[_0x316aa8 + 0x1];
            if (_0x4b68a2['fromVersion'] < _0x3cfce3['toVersion']) {
                const _0x37866a = _0x3cfce3['toVersion'], _0x30b06f = Math['max'](_0x37866a, _0x4b68a2['toVersion']);
                this['_fixRevision']({
                    'revision': _0x4b68a2,
                    'from': _0x37866a,
                    'to': _0x30b06f
                });
            }
        }
    }
    ['_fixRevision']({ revision: _0x549a1c, from: _0x4b0bc9, to: _0x3517ec } = {}) {
        const _0xb1f1cd = this['editor']['plugins']['get'](__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$collaboration$2d$core$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Users"]), _0x521641 = this['_revisionTracker']['buildRevisionData']({
            'revision': _0x549a1c,
            'from': _0x4b0bc9,
            'to': _0x3517ec
        });
        _0x521641['authors'] = _0x521641['authorsIds']['map']((_0x37b798)=>_0xb1f1cd['getUser'](_0x37b798)), _0x549a1c['_update'](_0x521641);
    }
    ['_preventResendingRevisionData'](_0x46318c) {
        const _0x4177a1 = {};
        _0x4177a1['id'] = _0x46318c['id'];
        for (const _0x2a9020 of Object['keys'](_0x46318c))'id' !== _0x2a9020 && (_0x4177a1[_0x2a9020] = void 0x0);
        this['_revisionTracker']['_bufferUpdate'](_0x4177a1['id'], _0x4177a1, !0x0);
    }
    async ['_fetchMissingUsers'](_0x488315) {
        const _0xb686c1 = this['editor']['plugins']['get'](__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$collaboration$2d$core$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Users"]), { connection: _0x7ae7a4 } = this['editor']['plugins']['get'](c), _0x371e95 = new Set();
        for (const _0x3800ef of _0x488315){
            for (const _0x25bf58 of _0x3800ef['authorsIds'])_0x281e3a(_0x25bf58);
            _0x3800ef['creatorId'] && _0x281e3a(_0x3800ef['creatorId']);
        }
        if (0x0 === _0x371e95['size']) return;
        const _0x2859c0 = await __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor$2d$cloud$2d$services$2d$collaboration$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["User"]['getMany'](_0x7ae7a4, Array['from'](_0x371e95));
        for (const _0x36b6f8 of _0x2859c0)_0xb686c1['getUser'](_0x36b6f8['id']) || _0xb686c1['addUser'](_0x36b6f8);
        function _0x281e3a(_0x1fcd63) {
            _0xb686c1['getUser'](_0x1fcd63) || _0x371e95['add'](_0x1fcd63);
        }
    }
}
function rt(_0xfef860) {
    return _0xfef860['message']['startsWith']('cloud-services-internal-error:\x20Revision\x20History\x20Service\x20is\x20not\x20connected.') || _0xfef860['message']['startsWith']('cloud-services-internal-error:\x20Not\x20connected.') || _0xfef860['message']['startsWith']('cloud-services-internal-error:\x20Request\x20timeout.');
}
class g extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$core$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Plugin"] {
    static get ['requires']() {
        return [
            'RevisionHistory',
            u,
            n
        ];
    }
    static get ['pluginName']() {
        return 'RealTimeCollaborativeRevisionHistory';
    }
    static get ['isOfficialPlugin']() {
        return !0x0;
    }
    static get ['isPremiumPlugin']() {
        return !0x0;
    }
}
class ts extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$ui$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["View"] {
    constructor(_0x1b9526){
        super(_0x1b9526);
        const _0x3978e1 = this['bindTemplate'];
        this['set']('usersCount', 0x0), this['set']('isHidden', !0x0), this['setTemplate']({
            'tag': 'div',
            'attributes': {
                'class': [
                    'ck',
                    'ck-presence-list__counter',
                    _0x3978e1['if']('isHidden', 'ck-presence-list__counter--hidden')
                ]
            },
            'children': [
                {
                    'text': _0x3978e1['to']('usersCount', (_0x56df4f)=>B(_0x1b9526, 'CONNECTED_USERS', _0x56df4f))
                }
            ]
        });
    }
}
class es extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$ui$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["View"] {
    ['items'];
    ['keystrokes'];
    constructor(_0x158165){
        super(_0x158165);
        const _0x463b7b = this['bindTemplate'];
        this['items'] = this['createCollection'](), this['keystrokes'] = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$utils$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["KeystrokeHandler"](), this['set']({
            'hasPopup': !0x1,
            'isExpanded': !0x1
        }), this['setTemplate']({
            'tag': 'div',
            'attributes': {
                'aria-haspopup': _0x463b7b['if']('hasPopup'),
                'aria-expanded': _0x463b7b['to']('isExpanded', (_0x2e41fb)=>this['hasPopup'] && String(_0x2e41fb)),
                'aria-label': _0x463b7b['to']('hasPopup', (_0x310042)=>B(_0x158165, _0x310042 ? 'Collapsed\x20connected\x20users\x20list\x20(press\x20ENTER\x20to\x20open\x20it)' : 'Connected\x20users\x20list')),
                'role': 'list',
                'tabindex': _0x463b7b['to']('hasPopup', (_0x2ea10b)=>!!_0x2ea10b && 0x0),
                'class': [
                    'ck',
                    'ck-presence-list__list'
                ]
            },
            'children': this['items'],
            'on': {
                'click': _0x463b7b['to'](()=>this['fire']('execute'))
            }
        }), this['on']('change:hasPopup', (_0x19f33c, _0x1e6e6f, _0x4e8d6a)=>{
            this['element'] && (_0x4e8d6a ? this['element']['setAttribute']('aria-expanded', String(this['isExpanded'])) : this['element']['removeAttribute']('aria-expanded'));
        });
    }
    ['focus']() {
        this['element']['focus']();
    }
    ['render']() {
        super['render'](), this['keystrokes']['listenTo'](this['element']);
    }
}
class L extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$ui$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["View"] {
    ['counterView'];
    ['inlineListView'];
    constructor(_0x2eae15){
        super(_0x2eae15);
        const _0x46ce80 = this['bindTemplate'];
        this['set']('isCollapsed', !0x0), this['counterView'] = new ts(this['locale']), this['inlineListView'] = new es(_0x2eae15), this['inlineListView']['bind']('hasPopup')['to'](this, 'isCollapsed'), this['listenTo'](this['inlineListView']['items'], 'change', ()=>{
            for (const _0x534b29 of this['inlineListView']['items'])_0x534b29['tooltipPosition'] = 's';
            this['inlineListView']['items']['first'] && (this['inlineListView']['items']['first']['tooltipPosition'] = 'se');
        }), this['setTemplate']({
            'tag': 'div',
            'attributes': {
                'class': [
                    'ck',
                    'ck-presence-list',
                    'ck-reset',
                    'ck-rounded-corners',
                    _0x46ce80['if']('isCollapsed', 'ck-presence-list--collapsed')
                ]
            },
            'children': [
                this['counterView'],
                this['inlineListView']
            ]
        });
    }
}
class j extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$ui$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["View"] {
    ['listWrapperView'];
    constructor(_0x251619, _0x27ddaf){
        super(_0x251619), this['listWrapperView'] = new vt(_0x251619, _0x27ddaf), this['setTemplate']({
            'tag': 'div',
            'attributes': {
                'tabindex': -0x1,
                'role': 'application',
                'class': [
                    'ck',
                    'ck-presence-list__dropdown-list'
                ],
                'aria-label': B(_0x251619, 'Connected\x20users\x20list\x20dropdown\x20menu')
            },
            'children': [
                this['listWrapperView']
            ]
        });
    }
}
class vt extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$ui$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["ListView"] {
    constructor(_0x4a4a22, _0x293d26){
        super(_0x4a4a22);
        const _0x56d1dd = this['bindTemplate'];
        this['set']('_isScrollable', !0x1), this['setTemplate']({
            'tag': _0x293d26 ? 'div' : 'ul',
            'attributes': {
                'class': [
                    'ck',
                    'ck-reset',
                    'ck-list',
                    'ck-presence-list__dropdown-list-wrapper',
                    _0x56d1dd['if']('_isScrollable', 'ck-presence-list__dropdown-list-wrapper_scrollable')
                ],
                'role': _0x56d1dd['to']('role'),
                'aria-label': _0x56d1dd['to']('ariaLabel'),
                'aria-labelledby': _0x56d1dd['to']('ariaLabelledBy')
            },
            'children': this['items']
        }), this['listenTo'](__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$utils$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["global"]['window'], 'resize', ()=>this['checkIfScrollable']()), this['items']['on']('change', ()=>this['checkIfScrollable']());
    }
    ['render']() {
        super['render'](), this['checkIfScrollable']();
    }
    ['checkIfScrollable']() {
        const _0x5b945b = this['element'];
        _0x5b945b && (this['_isScrollable'] = Math['max'](_0x5b945b['scrollHeight'], _0x5b945b['clientHeight']) > 0.8 * window['innerHeight']);
    }
}
class k extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$ui$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["ListItemView"] {
    ['userView'];
    constructor(_0x1b5b91, _0x3a31ca, _0xa8da17){
        super(_0x1b5b91);
        const _0xbc3e37 = this['bindTemplate'];
        this['userView'] = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$collaboration$2d$core$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["UserView"](_0x1b5b91, _0x3a31ca);
        const _0x3e4871 = {
            'tag': 'li',
            'attributes': {
                'class': [
                    'ck',
                    'ck-presence-list__dropdown-list-item'
                ],
                'tabindex': -0x1,
                'role': 'presentation',
                'aria-label': _0x3a31ca['name']
            },
            'children': [
                this['userView'],
                {
                    'tag': 'span',
                    'attributes': {
                        'class': [
                            'ck',
                            'ck-user__full-name'
                        ]
                    },
                    'children': [
                        {
                            'text': _0x3a31ca['name']
                        }
                    ]
                },
                {
                    'tag': 'span',
                    'attributes': {
                        'class': [
                            'ck',
                            'ck-presence-list__marker',
                            _0x3a31ca['color']['getBackgroundColorClass']()
                        ],
                        'aria-hidden': 'true'
                    }
                }
            ]
        };
        _0xa8da17 && (_0x3e4871['tag'] = 'button', _0x3e4871['on'] = {
            'click': _0xbc3e37['to'](()=>this['fire']('execute'))
        }), this['setTemplate'](_0x3e4871);
    }
    ['focus']() {
        this['element']['focus']();
    }
}
class y extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$ui$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["View"] {
    ['userView'];
    ['markerView'];
    constructor(_0x17b4e6, _0x37d69c, _0x409e24){
        super(_0x17b4e6);
        const _0xccffa4 = this['bindTemplate'];
        this['set']('isFocusable', !0x1), this['set']('hasTooltip', !0x0), this['set']('tooltipPosition', ''), this['userView'] = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$collaboration$2d$core$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["UserView"](_0x17b4e6, _0x37d69c), this['markerView'] = new dt(_0x17b4e6, _0x37d69c);
        const _0x47b0b1 = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$ui$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["LabelView"](_0x17b4e6);
        _0x47b0b1['template']['tag'] = 'span', _0x47b0b1['text'] = _0x37d69c['name'];
        const _0x1d8aa6 = {
            'tag': 'div',
            'attributes': {
                'class': [
                    'ck',
                    'ck-presence-list__list-item'
                ],
                'role': 'listitem',
                'tabindex': _0xccffa4['to']('isFocusable', (_0x15b6fd)=>!!_0x15b6fd && 0x0),
                'aria-labelledby': _0x47b0b1['id'],
                'data-cke-tooltip-text': this['userView']['name'],
                'data-cke-tooltip-position': _0xccffa4['to']('tooltipPosition'),
                'data-cke-tooltip-disabled': _0xccffa4['to']('hasTooltip', (_0x1c7809)=>!_0x1c7809),
                'data-cke-tooltip-class': 'ck-presence-list__list-item__tooltip'
            },
            'children': [
                this['userView'],
                this['markerView'],
                _0x47b0b1
            ]
        };
        _0x409e24 && (_0x1d8aa6['tag'] = 'button', _0x1d8aa6['on'] = {
            'click': _0xccffa4['to'](()=>this['fire']('execute'))
        }), this['setTemplate'](_0x1d8aa6);
    }
}
class dt extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$ui$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["View"] {
    constructor(_0x57a6bf, _0x16fd15){
        super(_0x57a6bf), this['setTemplate']({
            'tag': 'span',
            'attributes': {
                'class': [
                    'ck',
                    'ck-presence-list__marker',
                    _0x16fd15['color']['getBackgroundColorClass']()
                ],
                'aria-hidden': 'true'
            }
        });
    }
}
const A = {
    'collapseAt': 0x6,
    'displayMe': !0x0
};
class r extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$core$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["ContextPlugin"] {
    ['currentDisplayedUsers'];
    ['balloonPanelView'];
    ['view'];
    ['presenceDropdownView'];
    ['_bodyCollection'] = null;
    constructor(_0x38a592){
        super(_0x38a592), this['context']['config']['define']('presenceList', A);
        const _0x38115f = _0x38a592['config']['get']('presenceList.collapseAt');
        if ('number' != typeof _0x38115f) throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$utils$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["CKEditorError"]('presencelist-collapseat-invalid-format', this);
        if (_0x38115f < 0x1) throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$utils$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["CKEditorError"]('presencelist-collapseat-invalid-format', this);
        this['_allConnectedUsers'] = this['context']['plugins']['get'](i)['allConnectedUsers'], this['set']('usersCount', 0x0), this['currentDisplayedUsers'] = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$utils$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Collection"](), this['balloonPanelView'] = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$ui$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BalloonPanelView"](), this['balloonPanelView']['class'] = 'ck\x20ck-presence-list__balloon', this['view'] = this['_createView'](), this['presenceDropdownView'] = void 0x0;
    }
    static get ['requires']() {
        return [
            i
        ];
    }
    ['init']() {
        for (const _0x570666 of this['_allConnectedUsers'])this['_handleUserAdd'](_0x570666);
        this['listenTo'](this['_allConnectedUsers'], 'add', (_0x15e7b6, _0x326b7c)=>{
            this['_handleUserAdd'](_0x326b7c);
        }), this['listenTo'](this['_allConnectedUsers'], 'remove', (_0x552303, _0x224a90)=>{
            this['_handleUserRemove'](_0x224a90);
        });
    }
    ['_createView']() {
        const _0x81a5bf = this['context'], _0x2e5632 = new L(this['context']['locale']), _0x428c9e = this['balloonPanelView'];
        if (!(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lodash$2d$es$2f$isElement$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__default__as__isElement$3e$__["isElement"])(_0x81a5bf['config']['get']('presenceList.container'))) throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$utils$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["CKEditorError"]('presencelist-missing-container', this);
        return _0x2e5632['counterView']['bind']('usersCount')['to'](this), _0x2e5632['bind']('isCollapsed')['to'](this, 'usersCount', (_0x6a8f1c)=>{
            const { collapseAt: _0x1ef9b8, displayMe: _0x5cfb31 } = _0x81a5bf['config']['get']('presenceList'), _0x526e42 = _0x6a8f1c >= _0x1ef9b8;
            return _0x2e5632['counterView']['isHidden'] = !(0x1 == _0x6a8f1c && _0x5cfb31 || _0x526e42), _0x526e42 || this['hideDropdown'](), _0x526e42;
        }), _0x2e5632['inlineListView']['items']['bindTo'](this['currentDisplayedUsers'])['using']((_0x133f5e)=>{
            const _0x5da548 = _0x81a5bf['config']['get']('presenceList'), _0x2c8b84 = new y(_0x81a5bf['locale'], _0x133f5e, !!_0x5da548['onClick']);
            return _0x2c8b84['bind']('hasTooltip')['to'](_0x2e5632, 'isCollapsed', (_0x21e875)=>!_0x21e875), _0x2c8b84['bind']('isFocusable')['to'](_0x2e5632, 'isCollapsed', (_0x4f6aa4)=>!_0x4f6aa4), _0x5da548['onClick'] && this['listenTo'](_0x2c8b84, 'execute', ()=>{
                this['view']['isCollapsed'] || _0x5da548['onClick'](_0x133f5e, _0x2c8b84['element']);
            }), _0x2c8b84;
        }), this['listenTo'](_0x2e5632['inlineListView'], 'execute', ()=>{
            this['presenceDropdownView'] ? this['hideDropdown']() : this['view']['isCollapsed'] && this['showDropdown']();
        }), _0x2e5632['inlineListView']['keystrokes']['set']('Enter', (_0x202364, _0x5c3693)=>{
            this['view']['isCollapsed'] && (this['showDropdown'](), _0x5c3693());
        }), _0x2e5632['render'](), _0x428c9e['render'](), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$ui$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["clickOutsideHandler"])({
            'emitter': _0x2e5632,
            'activator': ()=>_0x428c9e['isVisible'],
            'contextElements': [
                _0x428c9e['element'],
                _0x2e5632['inlineListView']['element']
            ],
            'callback': ()=>this['hideDropdown']()
        }), _0x81a5bf['config']['get']('presenceList.container')['appendChild'](_0x2e5632['element']), this['_bodyCollection'] = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$ui$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BodyCollection"](this['context']['locale']), this['_bodyCollection']['attachToDom'](), this['_bodyCollection']['add'](this['balloonPanelView']), _0x2e5632;
    }
    ['_handleUserAdd'](_0x6af302) {
        if (!this['context']['config']['get']('presenceList.displayMe') && _0x6af302['isMe']) return;
        const _0x166c47 = this['context']['config']['get']('presenceList.collapseAt') - 0x1;
        this['usersCount']++, this['currentDisplayedUsers']['length'] == _0x166c47 && this['currentDisplayedUsers']['length'] > 0x1 && this['currentDisplayedUsers']['remove'](0x1);
        const _0xdb820d = _0x6af302['isMe'] ? 0x0 : this['currentDisplayedUsers']['length'];
        this['currentDisplayedUsers']['add'](_0x6af302, _0xdb820d);
    }
    ['_handleUserRemove'](_0x117c77) {
        if (this['usersCount']--, this['currentDisplayedUsers']['get'](_0x117c77['id']) && (this['currentDisplayedUsers']['remove'](_0x117c77['id']), this['currentDisplayedUsers']['length'] < this['usersCount'])) {
            for (const _0x180d2d of Array['from'](this['_allConnectedUsers'])['reverse']())if (!this['currentDisplayedUsers']['get'](_0x180d2d['id'])) return void this['currentDisplayedUsers']['add'](_0x180d2d, Math['min'](this['currentDisplayedUsers']['length'], 0x1));
        }
    }
    ['showDropdown']() {
        if (this['presenceDropdownView']) return;
        const _0x3ed6c2 = this['context']['config']['get']('presenceList');
        this['presenceDropdownView'] = new j(this['context']['locale'], !!_0x3ed6c2['onClick']), this['view']['inlineListView']['isExpanded'] = !0x0;
        const { listWrapperView: _0x4a9e96 } = this['presenceDropdownView'];
        _0x4a9e96['items']['bindTo'](this['_allConnectedUsers'])['using']((_0x59f941)=>{
            if (!_0x3ed6c2['displayMe'] && _0x59f941['isMe']) return null;
            const _0x5bb8cd = new k(this['context']['locale'], _0x59f941, !!_0x3ed6c2['onClick']);
            return _0x3ed6c2['onClick'] && this['listenTo'](_0x5bb8cd, 'execute', ()=>{
                _0x3ed6c2['onClick'](_0x59f941, _0x5bb8cd['element']);
            }), _0x5bb8cd;
        }), this['balloonPanelView']['content']['add'](this['presenceDropdownView']), this['balloonPanelView']['pin']({
            'target': this['view']['inlineListView']['element']
        }), _0x4a9e96['focus'](), _0x4a9e96['checkIfScrollable']();
        const _0x128c26 = (_0x51ebb4, _0x5aca0f)=>{
            this['hideDropdown'](), this['view']['inlineListView']['focus'](), _0x5aca0f();
        };
        _0x4a9e96['keystrokes']['set']('Esc', _0x128c26), _0x4a9e96['keystrokes']['set']('Shift+Tab', _0x128c26), _0x4a9e96['keystrokes']['set']('Tab', (_0x4749b2, _0x44600f)=>{
            !function(_0x7c966d) {
                const _0x583493 = [
                    'a',
                    'button',
                    'input',
                    'select',
                    'textarea',
                    '[tabindex]',
                    '[contenteditable]'
                ]['map']((_0x34be3b)=>_0x34be3b + ':not([disabled]):not([tabindex=\x22-1\x22])')['join'](','), _0x65ba94 = [
                    ...document['body']['querySelectorAll'](_0x583493)
                ]['filter']((_0x3085c6)=>_0x3085c6 === document['activeElement'] || _0x3085c6['offsetWidth'] + _0x3085c6['offsetHeight'] > 0x0)['sort']((_0x2a9a38, _0x5605fc)=>(_0x2a9a38['tabIndex'] || 0x0) - (_0x5605fc['tabIndex'] || 0x0)), _0x1bc775 = _0x65ba94['indexOf'](_0x7c966d), _0x4ddd14 = _0x65ba94[(_0x1bc775 + 0x1) % _0x65ba94['length']];
                _0x4ddd14 && _0x4ddd14['focus']();
            }(this['view']['element']), this['hideDropdown'](), _0x44600f();
        }), _0x4a9e96['focusTracker']['add'](this['view']['element']), _0x4a9e96['focusTracker']['on']('change:isFocused', (_0x2684d8, _0x4a683a, _0x806168)=>{
            _0x806168 || this['hideDropdown']();
        });
    }
    ['hideDropdown']() {
        this['presenceDropdownView'] && (this['view']['inlineListView']['isExpanded'] = !0x1, this['balloonPanelView']['unpin'](), this['balloonPanelView']['content']['remove'](this['presenceDropdownView']), this['presenceDropdownView']['destroy'](), this['presenceDropdownView'] = void 0x0);
    }
    ['destroy']() {
        super['destroy'](), this['view'] && this['view']['isRendered'] && this['view']['destroy'](), this['_bodyCollection'] && (this['_bodyCollection']['detachFromDom'](), this['_bodyCollection']['destroy'](), this['_bodyCollection'] = null);
    }
}
class s extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ckeditor$2f$ckeditor5$2d$core$2f$dist$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["ContextPlugin"] {
    static get ['requires']() {
        return [
            i,
            r
        ];
    }
    static get ['pluginName']() {
        return 'PresenceList';
    }
    static get ['isOfficialPlugin']() {
        return !0x0;
    }
    static get ['isPremiumPlugin']() {
        return !0x0;
    }
}
;
}}),

};

//# sourceMappingURL=node_modules_%40ckeditor_ckeditor5-real-time-collaboration_dist_index_6e033c.js.map